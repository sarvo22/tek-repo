create table if not exists tbl_voucher_type
(
    voucher_type     varchar(50) not null,
    voucher_name   	 varchar(50) not null,
    voucher_group	 varchar(30) not null,
    company_id      integer not null,
    remarks			text,
    system_remarks	text,
    sort_seq		integer default 0 not null,
    is_locked		integer default 0 not null,
    created_by 		integer NOT NULL,
    created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
    modified_by 	integer,
    modified_dt		TIMESTAMP,
    is_deleted		integer default 0 not null,
    PRIMARY KEY(voucher_type)    
);


create SEQUENCE tbl_auto_number_generator_seq;
create table if not exists tbl_auto_number_generator
(
    auto_number_id    integer not null default nextval('tbl_auto_number_generator_seq'),
    voucher_type     varchar(50) not null,
    voucher_number   varchar(50) not null,
    next_number      integer not null,
    current_number   integer not null,
    company_id      integer not null,
    remarks			text,
    system_remarks	text,
    sort_seq		integer default 0 not null,
    is_locked		integer default 0 not null,
    created_by 		integer NOT NULL,
    created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
    modified_by 	integer,
    modified_dt		TIMESTAMP,
    is_deleted		integer default 0 not null,
    PRIMARY KEY(auto_number_id),
    CONSTRAINT tbl_auto_number_generator_fk1 FOREIGN KEY(company_id) REFERENCES public.tbl_company(company_id)
);

create table if not exists tbl_currency
(
	currency_code	varchar(50)  not null,
	currency_name 	varchar(100) not null,
	symbol  		varchar(50)  not null,
    formatter   	varchar(50)  not null,
    decimal_places  integer not null,
    company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(currency_code),
	CONSTRAINT tbl_currency_fk1 FOREIGN KEY(company_id) REFERENCES public.tbl_company(company_id)
);

create sequence tbl_company_currency_seq;
create table if not exists tbl_company_currency
(
    map_id integer NOT NULL DEFAULT nextval('tbl_company_currency_seq'),
    company_id      integer,
    currency_code   varchar(50),
    is_default      integer,
    remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
    PRIMARY KEY (map_id)
);

create SEQUENCE tbl_department_seq;
create table if not exists tbl_department
(
	department_id 	 integer not null default nextval('tbl_department_seq'),
	department_name  varchar(100) not null,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY key (department_id)
);


create SEQUENCE tbl_employee_seq;
create table if not exists tbl_employee
(
	employee_id integer not null default nextval('tbl_employee_seq'),
	first_name varchar(100) not null,
	middle_name	varchar(100),
	last_name	varchar(100),
	nick_name	varchar(100),
	contract_type	varchar(100),
	department_id	integer,
	designation		varchar(100),
	gender			varchar(100),
	marital_status	varchar(100),
	nationality		varchar(100),
	identity_type1	varchar(100),
	identity_no1	varchar(100),
	identity_type2	varchar(100),
	identity_no2	varchar(100),
	identity_type3	varchar(100),
	identity_no3	varchar(100),
	per_address1	text,
	per_address2	text,
	per_country		integer,
	per_state		varchar(50),
	per_city		varchar(50),
	per_pin_code    varchar(50),
	cur_address1	text,
	cur_address2	text,
	cur_country		integer,
	cur_state		varchar(50),
	cur_city		varchar(50),
	cur_pin_code    varchar(50),
	doj				date,
	dob				date,
	resign_dt		date,
	email			varchar(50),
	picture_name    varchar(100),
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY key (employee_id),
	constraint tbl_employee_fk1 FOREIGN KEY(department_id) REFERENCES tbl_department(department_id)
);

create SEQUENCE tbl_payment_type_seq;
create table if not exists tbl_payment_type
(
	payment_type_id integer not null default nextval('tbl_payment_type_seq'),
	payment_type_name VARCHAR(100) not null,
	due_months numeric(20,2),
	due_days	numeric(20,2),
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(payment_type_id)
);

CREATE SEQUENCE tbl_customer_seq;
create table if not exists tbl_customer
(
	customer_id		integer  NOT NULL DEFAULT nextval('tbl_customer_seq'),
	customer_code	VARCHAR (50),
	customer_name	VARCHAR (100) NOT NULL,
	customer_alias_name	VARCHAR (100) NOT NULL,
	payment_type_id		integer  NOT NULL,
	head_salesman_id	integer,
	salesman_id 		integer,
	primary_contact_name 	varchar(100),
	primary_contact_no 		varchar(100),
	business_type 		varchar(100),
	business_no 		varchar(100),
	currency 			varchar(100),
	zone				varchar(100),
	phone_no			VARCHAR (100),
	email				varchar(100),
	website				varchar(100),
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(customer_id),
	constraint tbl_customer_fk1 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_customer_fk2 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id),
	constraint tbl_customer_fk3 FOREIGN key(head_salesman_id) references tbl_employee(employee_id),
	constraint tbl_customer_fk4 FOREIGN key(salesman_id) references tbl_employee(employee_id)
)
;

create SEQUENCE tbl_customer_address_seq;
create table if not exists tbl_customer_address
(
	address_id 		integer not null default nextval('tbl_customer_address_seq'),
	customer_id 	integer not null,
	address_type	varchar(50) not null,
	address1 		varchar(500),
	address2 		varchar(500),	
	country 		varchar(100),
	state 			varchar(100),
	city 			varchar(100),
	area 			varchar(100),
	street 			varchar(100),
	pin_code 		varchar(50),
	default_address integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(address_id),
	constraint tbl_customer_address_fk1 FOREIGN key(customer_id) references tbl_customer(customer_id)
);

create SEQUENCE tbl_customer_contact_seq;
create table if not exists tbl_customer_contact 
(
	contact_id integer not null default nextval('tbl_customer_contact_seq'),
	customer_id integer not null,
	contact_type varchar(50) not null,
	name varchar(50),
	designation varchar(50),
	phone_no VARCHAR(50),
	mobile_no varchar(50),
	email varchar(50),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(contact_id),
	constraint tbl_customer_contact_fk1 FOREIGN key(customer_id) references tbl_customer(customer_id)
);

create SEQUENCE tbl_customer_document_seq;
create table if not exists tbl_customer_document
(
	document_id integer not null default nextval('tbl_customer_document_seq'),
	customer_id integer not null,
	document_type	varchar(50) not null,
	document_name	varchar(100),
	document_url	varchar(100),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(document_id),
	constraint tbl_customer_document_fk1 FOREIGN key(customer_id) references tbl_customer(customer_id)
);

create SEQUENCE tbl_customer_limit_seq;
create table if not exists tbl_customer_limit
(
	limit_id integer not null default nextval('tbl_customer_limit_seq'),
	customer_id	integer not null,
	limit_type 		varchar(50) not null,
	currency		varchar(50),
	exchange_rate 	numeric(20,4),
	limit_amt_ic 	numeric(20,4),
	limit_amt_lc 	numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(limit_id),
	constraint tbl_customer_limit_fk1 FOREIGN key(customer_id) references tbl_customer(customer_id)
);

CREATE SEQUENCE tbl_supplier_seq;
create table if not exists tbl_supplier
(
	supplier_id		integer  NOT NULL DEFAULT nextval('tbl_supplier_seq'),
	supplier_code	VARCHAR (50),
	supplier_name	VARCHAR (100) NOT NULL,
	supplier_alias_name	VARCHAR (100) NOT NULL,
	payment_type_id		integer  NOT NULL,
	head_buyer_id	integer,
	buyer_id 		integer,
	primary_contact_name 	varchar(100),
	primary_contact_no 		varchar(100),
	business_type varchar(100),
	business_no varchar(100),
	currency varchar(100),
	zone	varchar(100),
	phone_no		VARCHAR (100),
	email			varchar(100),
	website		varchar(100),
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(supplier_id)
)
;

create SEQUENCE tbl_supplier_address_seq;
create table if not exists tbl_supplier_address
(
	address_id 		integer not null default nextval('tbl_supplier_address_seq'),
	supplier_id 	integer not null,
	address_type	varchar(50),
	address1 varchar(500),
	address2 varchar(500),	
	country varchar(100),
	state varchar(100),
	city varchar(100),
	area varchar(100),
	street varchar(100),
	pin_code varchar(50),
	default_address integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(address_id)
);

create SEQUENCE tbl_supplier_contact_seq;
create table if not exists tbl_supplier_contact 
(
	contact_id integer not null default nextval('tbl_supplier_contact_seq'),
	supplier_id integer not null,
	contact_type varchar(50),
	name varchar(50),
	designation varchar(50),
	phone_no VARCHAR(50),
	mobile_no varchar(50),
	email varchar(50),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(contact_id)
);

create SEQUENCE tbl_supplier_document_seq;
create table if not exists tbl_supplier_document
(
	document_id integer not null default nextval('tbl_supplier_document_seq'),
	supplier_id integer not null,
	document_type	varchar(50),
	document_name	varchar(100),
	document_url	varchar(100),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(document_id)
);

create SEQUENCE tbl_supplier_limit_seq;
create table if not exists tbl_supplier_limit
(
	limit_id integer not null default nextval('tbl_supplier_limit_seq'),
	supplier_id	integer not null,
	limit_type 		varchar(50),
	currency		varchar(50),
	exchange_rate 	numeric(20,4),
	limit_amt_ic 	numeric(20,4),
	limit_amt_lc 	numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(limit_id)
);


CREATE SEQUENCE tbl_factory_seq;
create table if not exists tbl_factory
(
	factory_id		integer  NOT NULL DEFAULT nextval('tbl_factory_seq'),
	factory_code	VARCHAR (50)  NOT NULL,
	factory_name	VARCHAR (100) NOT NULL,
	factory_alias_name	VARCHAR (100) NOT NULL,
	payment_type_id		integer  NOT NULL,
	head_buyer_id	integer,
	buyer_id 		integer,
	primary_contact_name 	varchar(100),
	primary_contact_no 		varchar(100),
	business_type varchar(100),
	business_no varchar(100),
	currency varchar(100),
	zone	varchar(100),
	phone_no		VARCHAR (100),
	email			varchar(100),
	website		varchar(100),
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(factory_id)
)
;

create SEQUENCE tbl_factory_address_seq;
create table if not exists tbl_factory_address
(
	address_id 		integer not null default nextval('tbl_factory_address_seq'),
	factory_id 	integer not null,
	address_type	varchar(50),
	address1 varchar(500),
	address2 varchar(500),	
	country varchar(100),
	state varchar(100),
	city varchar(100),
	area varchar(100),
	street varchar(100),
	pin_code varchar(50),
	default_address integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(address_id)
);

create SEQUENCE tbl_factory_contact_seq;
create table if not exists tbl_factory_contact 
(
	contact_id integer not null default nextval('tbl_factory_contact_seq'),
	factory_id integer not null,
	contact_type varchar(50),
	name varchar(50),
	designation varchar(50),
	phone_no VARCHAR(50),
	mobile_no varchar(50),
	email varchar(50),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(contact_id)
);

create SEQUENCE tbl_factory_document_seq;
create table if not exists tbl_factory_document
(
	document_id integer not null default nextval('tbl_factory_document_seq'),
	factory_id integer not null,
	document_type	varchar(50),
	document_name	varchar(100),
	document_url	varchar(100),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(document_id)
);

create SEQUENCE tbl_factory_limit_seq;
create table if not exists tbl_factory_limit
(
	limit_id integer not null default nextval('tbl_factory_limit_seq'),
	factory_id	integer not null,
	limit_type 		varchar(50),
	currency		varchar(50),
	exchange_rate 	numeric(20,4),
	limit_amt_ic 	numeric(20,4),
	limit_amt_lc 	numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(limit_id)
);



create SEQUENCE tbl_exchange_rate_seq;
create table if not exists tbl_exchange_rate
(
	exchange_rate_id integer not null default nextval('tbl_exchange_rate_seq'),
	exchange_rate_dt date NOT NULL,
	currency 		varchar(50),
	exchange_rate 	numeric(20,4),
	bank_buy_rate 	numeric(20,4),
	bank_sell_rate 	numeric(20,4),
	limit_rate 		numeric(20,4),
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(exchange_rate_id)	
);

create SEQUENCE tbl_metal_rate_seq;
create table if not exists tbl_metal_rate
(

	metal_rate_id integer not null default nextval('tbl_metal_rate_seq'),
	metal_rate_dt 	TIMESTAMP  DEFAULT current_timestamp NOT NULL,
	commodity_id  	integer not null,
	uom 			varchar(50),
	currency		varchar(50),
	exchange_rate 	numeric(20,4),
	input_rate 		numeric(20,4),
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(metal_rate_id)	
);


-- Inventory Service tables
create SEQUENCE tbl_commodity_group_seq;
create table if not exists tbl_commodity_group
(
	commodity_group_id  integer not null default nextval('tbl_commodity_group_seq'),	
	commodity_group_name			varchar(50) not null,	
	description 		varchar(100),
	commodity_group_type      varchar(50) not null,
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(commodity_group_id)
);

create SEQUENCE tbl_commodity_seq;
create table if not exists tbl_commodity
(
	commodity_id integer not null default nextval('tbl_commodity_seq'),
	commodity_name	varchar(50) not null,
	description varchar(100),
	commodity_group_id integer not null,
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(commodity_id),
	CONSTRAINT tbl_commodity_fk1 FOREIGN KEY(commodity_group_id) REFERENCES tbl_commodity_group(commodity_group_id)

);

create SEQUENCE tbl_cut_seq;
CREATE TABLE IF NOT EXISTS tbl_cut
(
	cut_id integer not null default nextval('tbl_cut_seq'),
    cut_name 	varchar(50) NOT NULL,
    commodity_group_id	integer not null,
    company_id		integer not null,
    sort_seq 	integer NOT NULL DEFAULT 0,
    is_locked integer NOT NULL DEFAULT 0,
    created_by integer NOT NULL,
    created_dt TIMESTAMP DEFAULT current_timestamp  NOT NULL,
    modified_by integer,
    modified_dt timestamp,
    is_deleted integer default 0 not null,
    CONSTRAINT tbl_cut_pk PRIMARY KEY (cut_id),
    CONSTRAINT tbl_cut_fk1 FOREIGN KEY(commodity_group_id) REFERENCES tbl_commodity_group(commodity_group_id)
);

create SEQUENCE tbl_color_seq;
CREATE TABLE IF NOT EXISTS tbl_color
(
	color_id integer not null default nextval('tbl_color_seq'),
    color_name 	varchar(50) NOT NULL,
    commodity_group_id	integer not null,
    company_id		integer not null,
    sort_seq 	integer NOT NULL DEFAULT 0,
    is_locked integer NOT NULL DEFAULT 0,
    created_by integer NOT NULL,
    created_dt TIMESTAMP DEFAULT current_timestamp  NOT NULL,
    modified_by integer,
    modified_dt timestamp,
    is_deleted integer default 0 not null,
    CONSTRAINT tbl_color_pk PRIMARY KEY (color_id),
    CONSTRAINT tbl_color_fk1 FOREIGN KEY(commodity_group_id) REFERENCES tbl_commodity_group(commodity_group_id)
);

create SEQUENCE tbl_shape_seq;
CREATE TABLE IF NOT EXISTS tbl_shape
(
	shape_id integer not null default nextval('tbl_shape_seq'),
    shape_name 	varchar(50) NOT NULL,
    commodity_group_id	integer not null,
    company_id		integer not null,
    sort_seq 	integer NOT NULL DEFAULT 0,
    is_locked integer NOT NULL DEFAULT 0,
    created_by integer NOT NULL,
    created_dt TIMESTAMP DEFAULT current_timestamp  NOT NULL,
    modified_by integer,
    modified_dt timestamp,
    is_deleted integer default 0 not null,
    CONSTRAINT tbl_shape_pk PRIMARY KEY (shape_id),
    CONSTRAINT tbl_shape_fk1 FOREIGN KEY(commodity_group_id) REFERENCES tbl_commodity_group(commodity_group_id)
);

create SEQUENCE tbl_clarity_seq;
CREATE TABLE IF NOT EXISTS tbl_clarity
(
	clarity_id integer not null default nextval('tbl_clarity_seq'),
    clarity_name 	varchar(50) NOT NULL,
    commodity_group_id	integer not null,
    company_id		integer not null,
    sort_seq 	integer NOT NULL DEFAULT 0,
    is_locked integer NOT NULL DEFAULT 0,
    created_by integer NOT NULL,
    created_dt TIMESTAMP DEFAULT current_timestamp  NOT NULL,
    modified_by integer,
    modified_dt timestamp,
    is_deleted integer default 0 not null,
    CONSTRAINT tbl_clarity_pk PRIMARY KEY (clarity_id),
    CONSTRAINT tbl_clarity_fk1 FOREIGN KEY(commodity_group_id) REFERENCES tbl_commodity_group(commodity_group_id)
);


create SEQUENCE tbl_karatage_seq;
CREATE TABLE IF NOT EXISTS tbl_karatage
(
	karatage_id integer not null default nextval('tbl_karatage_seq'),
    karatage_name 	varchar(50) NOT NULL,
    impure_to_pure_conv_factor numeric(20,4),
    pure_to_impure_conv_factor numeric(20,4),
    company_id		integer not null,
    sort_seq 	integer NOT NULL DEFAULT 0,
    is_locked integer NOT NULL DEFAULT 0,
    created_by integer NOT NULL,
    created_dt TIMESTAMP DEFAULT current_timestamp  NOT NULL,
    modified_by integer,
    modified_dt timestamp,
    is_deleted integer default 0 not null,
    CONSTRAINT tbl_karatage_pk PRIMARY KEY (karatage_id)
);


create SEQUENCE tbl_bin_seq;
CREATE TABLE IF NOT EXISTS tbl_bin
(
    bin_id integer not null default nextval('tbl_bin_seq'),
    bin_name 		varchar(50) NOT NULL,
    bin_type 		varchar(30) not null,
    is_default      integer default 0 not null,
    company_id		integer not null,
    sort_seq 		integer NOT NULL DEFAULT 0,
    is_locked 		integer NOT NULL DEFAULT 0,
    created_by 		integer NOT NULL,
    created_dt 		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
    modified_by 	integer,
    modified_dt 	timestamp,
    is_deleted 		integer default 0 not null,
    CONSTRAINT tbl_bin_pk PRIMARY KEY (bin_id)
);


create SEQUENCE tbl_product_seq;
create table  if not exists tbl_product
(
	product_id integer not null default nextval('tbl_product_seq'),
	product_no varchar(100) not null,
	description varchar(100) not null,
	commodity_id 		integer not null,
	commodity_group_id	integer not null,
	uom1 	varchar(50) not null,
	uom2	varchar(50),
	
	sieve_size varchar(50),
	mm_size varchar(50),
	measurement_lxb_h	varchar(50),
	measurement_l varchar(50),
	measurement_b varchar(50),
	measurement_h varchar(50),
	
	shape_id integer,
	cut_id integer,
	color_id integer,
	clarity_id integer,
	karatage_id integer,

	carat_weight numeric(20,4),
	lab_name	varchar(50),
	certificate_no	varchar(100),
	treatment	varchar(50),
	transparency varchar(50),
	origin	varchar(50),
	specific_gravity	varchar(50),
	certificate_image_path varchar(100),
	certificate_url		varchar(100),
	polish varchar(50),
	stone_type varchar(50),
	min_wt numeric(20,4),
	max_wt numeric(20,4),
	symmetry varchar(50),
	fluorescence varchar(50),
	inscription_no varchar(50),
	table_description varchar(50),
	currency varchar(50),
	exchange_rate numeric(20,4),
	rapaport_price numeric(20,4),
	rapaport_date date,
	
	purity varchar(50),
	unit1 varchar(50),
	unit2 varchar(50),
	comments varchar(50),
	cost_price numeric(20,4),
	sales_price numeric(20,4),
	a_price      numeric(20,4),
	b_price       numeric(20,4),
	picture1_path	varchar(100),
	picture2_path	varchar(100),
	picture3_path	varchar(100),
	picture4_path	varchar(100),
	video1_path		varchar(100),
	video2_path		varchar(100),
	prod_category   varchar(50) not null,
	company_id      integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(product_id)
);

create SEQUENCE tbl_product_price_seq;
create table  if not exists tbl_product_price
(
	price_id        integer not null default nextval('tbl_product_price_seq'),
	product_id      integer not null,
	price_dt         date,
    currency        varchar(50),
    cost_price      numeric(20,4),
    sales_price     numeric(20,4),
    a_price         numeric(20,4),
    b_price         numeric(20,4),
    company_id      integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(price_id)
);




-- Purchase invoice module goes here
create SEQUENCE tbl_purchase_invoice_main_seq;
create table if not exists tbl_purchase_invoice_main
(
	inv_id 		integer not null default nextval('tbl_purchase_invoice_main_seq'),
	inv_type 	varchar(50) not null,
	inv_no 		varchar(50) not null,
	REFERENCE_no 	varchar(50) ,
	inv_dt 			date not null,
	inv_due_dt		date not null,
	inv_due_months 	numeric(20,4) not null,
	inv_due_days 	numeric(20,4) not null,
	currency 		varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
	supplier_id 	integer not null,
	head_buyer_id 	integer,
	buyer_id 		integer,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	shipment_company_name varchar(50),
	carrier_id 			integer,	
	tracking_no 		varchar(50),
	tracking_status 	varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_qty1 numeric(20,4) default 0 not null,
	total_invoice_qty2 numeric(20,4) default 0 not null,
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	note 			text,
	terms_conditions text,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_purchase_invoice_main_fk1 FOREIGN KEY(supplier_id) REFERENCES tbl_supplier(supplier_id),
	constraint tbl_purchase_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_purchase_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_purchase_invoice_det_seq;
create table if not exists tbl_purchase_invoice_det
(
	inv_det_id integer not null default nextval('tbl_purchase_invoice_det_seq'),
	inv_id 		integer not null,
	ref_inv_type 	varchar(30),
	ref_inv_id  	integer,
	ref_inv_det_id  integer,
	product_id 	integer not null,
	prod_description text,
	bin_id 		integer not null,
	inv_qty1	numeric(20,4) default 0 not null,
	inv_qty2	numeric(20,4) default 0 not null,
	uom1		varchar(50) not null,
	uom2 		varchar(50) ,
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	conf_qty1	numeric(20,4) default 0 not null,
	conf_qty2	numeric(20,4) default 0 not null,
	ret_qty1	numeric(20,4) default 0 not null,
	ret_qty2	numeric(20,4) default 0 not null,
	conf_input_rate	numeric(20,4) default 0 not null,
	conf_input_amt	numeric(20,4) default 0 not null,
	ret_input_rate	numeric(20,4) default 0 not null,
	ret_input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4),
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_purchase_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_purchase_invoice_main(inv_id),
	CONSTRAINT tbl_purchase_invoice_det_fk2 FOREIGN KEY(product_id) REFERENCES tbl_product(product_id),
	CONSTRAINT tbl_purchase_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);

create SEQUENCE tbl_purchase_invoice_chgs_seq;
create table if not exists tbl_purchase_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_purchase_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_supplier_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_purchase_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_purchase_invoice_main(inv_id)
);

create SEQUENCE tbl_purchase_return_invoice_main_seq;
create table if not exists tbl_purchase_return_invoice_main
(
	inv_id 		integer not null default nextval('tbl_purchase_return_invoice_main_seq'),
	inv_type 	varchar(50) not null,
	inv_no 		varchar(50) not null,
	REFERENCE_no 	varchar(50) ,
	inv_dt 			date not null,
	inv_due_dt		date not null,
	inv_due_months 	numeric(20,4) not null,
	inv_due_days 	numeric(20,4) not null,
	currency 		varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
	supplier_id 	integer not null,
	head_buyer_id 	integer,
	buyer_id 		integer,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	shipment_company_name varchar(50),
	carrier_id 			integer,	
	tracking_no 		varchar(50),
	tracking_status 	varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_qty1 numeric(20,4) default 0 not null,
    total_invoice_qty2 numeric(20,4) default 0 not null,
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	note 			text,
	terms_conditions text,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_purchase_return_invoice_main_fk1 FOREIGN KEY(supplier_id) REFERENCES tbl_supplier(supplier_id),
	constraint tbl_purchase_return_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_purchase_return_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);

create SEQUENCE tbl_purchase_return_invoice_det_seq;
create table if not exists tbl_purchase_return_invoice_det
(
	inv_det_id integer not null default nextval('tbl_purchase_return_invoice_det_seq'),
	inv_id 		integer not null,
	ref_inv_type 	varchar(30),
	ref_inv_id  	integer,
	ref_inv_det_id  integer,
	product_id 	integer not null,
	prod_description text,
	bin_id 		integer not null,
	inv_qty1	numeric(20,4) default 0 not null,
	inv_qty2	numeric(20,4) default 0 not null,
	uom1		varchar(50) not null,
	uom2 		varchar(50) ,
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4),
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_purchase_return_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_purchase_return_invoice_main(inv_id),
	CONSTRAINT tbl_purchase_return_invoice_det_fk2 FOREIGN KEY(product_id) REFERENCES tbl_product(product_id),
	CONSTRAINT tbl_purchase_return_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);

create SEQUENCE tbl_purchase_return_invoice_chgs_seq;
create table if not exists tbl_purchase_return_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_purchase_return_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_supplier_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_purchase_return_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_purchase_return_invoice_main(inv_id)
);

-- Invoice modules are start here
create SEQUENCE tbl_sales_invoice_main_seq;
create table if not exists tbl_sales_invoice_main
(
	inv_id 		integer not null default nextval('tbl_sales_invoice_main_seq'),
	inv_type 	varchar(30) not null,
	inv_no 		varchar(30) not null,
	REFERENCE_no varchar(50),
	inv_dt 		date not null,
	inv_due_dt	date not null,
	inv_due_months numeric(20,4) default 0 not null,
	inv_due_days 	numeric(20,4) default 0 not null,
	currency 		varchar(50) not null,
	exchange_rate numeric(20,4) default 0 not null,
	customer_id integer not null,
	head_salesman_id 	integer not null,
	salesman_id 		integer not null,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	carrier_id 		integer,
	shipment_company_name varchar(50),
	tracking_no varchar(50),
	tracking_status varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_qty1 numeric(20,4) default 0 not null,
	total_invoice_qty2 numeric(20,4) default 0 not null,
	total_invoice_amount		numeric(20,4) default 0 not null,
	total_received_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),	
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_sales_invoice_main_fk1 FOREIGN KEY(customer_id) REFERENCES tbl_customer(customer_id),
	CONSTRAINT tbl_sales_invoice_main_fk2 FOREIGN KEY(payment_type_id) REFERENCES tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_sales_invoice_det_seq;
create table if not exists tbl_sales_invoice_det
(
	inv_det_id 		integer not null default nextval('tbl_sales_invoice_det_seq'),
	inv_id 			integer not null,
	product_id 		integer not null,
	bin_id 			integer not null,
	prod_description text,
	inv_qty1	numeric(20,4) default 0 not null,
	inv_qty2	numeric(20,4) default 0 not null,
	uom1		varchar(50) not null,
	uom2 		varchar(50),
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	conf_qty1	numeric(20,4) default 0 not null,
	conf_qty2	numeric(20,4) default 0 not null,
	ret_qty1	numeric(20,4) default 0 not null,
	ret_qty2	numeric(20,4) default 0 not null,
	conf_input_rate	numeric(20,4) default 0 not null,
	conf_input_amt	numeric(20,4) default 0 not null,
	ret_input_rate	numeric(20,4) default 0 not null,
	ret_input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4) default 0 not null,
	cost_price 		numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_sales_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_sales_invoice_main(inv_id),
	CONSTRAINT tbl_sales_invoice_det_fk2 FOREIGN KEY(product_id) REFERENCES tbl_product(product_id),
	CONSTRAINT tbl_sales_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);


create SEQUENCE tbl_sales_invoice_chgs_seq;
create table if not exists tbl_sales_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_sales_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_customer_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_sales_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_sales_invoice_main(inv_id)
);

create SEQUENCE tbl_sales_return_invoice_main_seq;
create table if not exists tbl_sales_return_invoice_main
(
	inv_id 		integer not null default nextval('tbl_sales_return_invoice_main_seq'),
	inv_type 	varchar(30) not null,
	inv_no 		varchar(30) not null,
	REFERENCE_no varchar(50),
	inv_dt 		date not null,
	inv_due_dt	date not null,
	inv_due_months numeric(20,4) default 0 not null,
	inv_due_days 	numeric(20,4) default 0 not null,
	currency 		varchar(50) not null,
	exchange_rate numeric(20,4) default 0 not null,
	customer_id integer not null,
	head_salesman_id 	integer not null,
	salesman_id 		integer not null,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	carrier_id 		integer,
	shipment_company_name varchar(50),
	tracking_no varchar(50),
	tracking_status varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_qty1 numeric(20,4) default 0 not null,
	total_invoice_qty2 numeric(20,4) default 0 not null,
	total_invoice_amount		numeric(20,4) default 0 not null,
	total_received_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),	
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_sales_return_invoice_main_fk1 FOREIGN KEY(customer_id) REFERENCES tbl_customer(customer_id),
	CONSTRAINT tbl_sales_return_invoice_main_fk2 FOREIGN KEY(payment_type_id) REFERENCES tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_sales_return_invoice_det_seq;
create table if not exists tbl_sales_return_invoice_det
(
	inv_det_id 		integer not null default nextval('tbl_sales_return_invoice_det_seq'),
	inv_id 			integer not null,
	ref_inv_type    varchar(30),
	ref_inv_id      integer,
	ref_inv_det_id  integer,
	product_id 		integer not null,
	bin_id 			integer not null,
	prod_description text,
	inv_qty1	numeric(20,4) default 0 not null,
	inv_qty2	numeric(20,4) default 0 not null,
	uom1		varchar(50) not null,
	uom2 		varchar(50),
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4) default 0 not null,
	cost_price 		numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_sales_return_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_sales_return_invoice_main(inv_id),
	CONSTRAINT tbl_sales_return_invoice_det_fk2 FOREIGN KEY(product_id) REFERENCES tbl_product(product_id),
	CONSTRAINT tbl_sales_return_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);


create SEQUENCE tbl_sales_return_invoice_chgs_seq;
create table if not exists tbl_sales_return_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_sales_return_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_customer_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_sales_return_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_sales_return_invoice_main(inv_id)
);

create SEQUENCE tbl_bin_transfer_main_seq;
create table if not exists tbl_bin_transfer_main
(
	transfer_id		integer not null default nextval('tbl_bin_transfer_main_seq'),
	transfer_type	varchar(30) not null,
	transfer_no    varchar(50) 	not null,
	transfer_dt    date not null,
	transfer_by     integer,
	currency_code 	varchar(50),
	exchange_rate 	numeric(20,4),
	source_bin_id 	integer,
	dest_bin_id  	integer,	
	company_id integer not null,
	total_qty1 numeric(20,4) default 0 not null,
	total_qty2 numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(transfer_id),
	CONSTRAINT tbl_bin_transfer_main_gk1 FOREIGN KEY(company_id) REFERENCES public.tbl_company(company_id)
);

create SEQUENCE tbl_bin_transfer_det_seq;
create table if not exists tbl_bin_transfer_det
(
	transfer_det_id integer not null default nextval('tbl_bin_transfer_det_seq'),
	transfer_id		integer not null,
	product_id 		integer not null,
	source_bin_id 	integer not null,
	dest_bin_id  	integer not null,
	transfer_qty1  	numeric(20,4) not null,
	transfer_qty2	numeric(20,4) not null,
	image_url		text,
	cost_price 		numeric(20,4),
	sellig_price 	numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(transfer_det_id),
	constraint tbl_bin_transfer_det_fk1 FOREIGN KEY(transfer_id) REFERENCES tbl_bin_transfer_main(transfer_id)
);

-- jew bin transfer
create SEQUENCE tbl_jew_bin_transfer_main_seq;
create table if not exists tbl_jew_bin_transfer_main
(
	transfer_id		integer not null default nextval('tbl_jew_bin_transfer_main_seq'),
	transfer_type	varchar(30) not null,
	transfer_no    varchar(50) 	not null,
	transfer_dt    date not null,
	transfer_by     integer,
	currency_code 	varchar(50),
	exchange_rate 	numeric(20,4),
	source_bin_id 	integer,
	dest_bin_id  	integer,	
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(transfer_id),
	CONSTRAINT tbl_jew_bin_transfer_main_fk1 FOREIGN KEY(company_id) REFERENCES public.tbl_company(company_id)
);


create SEQUENCE tbl_jew_bin_transfer_det_seq;
create table if not exists tbl_jew_bin_transfer_det
(
	transfer_det_id integer not null default nextval('tbl_jew_bin_transfer_det_seq'),
	transfer_id		integer not null,
	product_id 		integer not null,
	source_bin_id 	integer not null,
	dest_bin_id  	integer not null,
	transfer_qty  	numeric(20,4) not null,
	image_url		text,
	cost_price 		numeric(20,4),
	sellig_price 	numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(transfer_det_id),
	CONSTRAINT positive_qty CHECK (transfer_qty > 0),
	constraint tbl_jew_bin_transfer_det_fk1 FOREIGN KEY(transfer_id) REFERENCES tbl_jew_bin_transfer_main(transfer_id)
);

create SEQUENCE tbl_mixing_main_seq;
create table if not exists tbl_mixing_main
(
	mixing_id		integer not null default nextval('tbl_mixing_main_seq'),
	mixing_type 	varchar(50) not null,
	mixing_no    	varchar(50) not null,
	mixing_dt    	date not null,
	mixing_by     	integer,
	currency_code 	varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
    total_mix_qty1 numeric(20,4) default 0 not null,
	total_mix_qty2 numeric(20,4) default 0 not null,
	total_mix_amount	numeric(20,4) default 0 not null,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(mixing_id),
	constraint tbl_mixing_main_fk1 FOREIGN KEY(company_id) references public.tbl_company(company_id)
);

create SEQUENCE tbl_mixing_det_seq;
create table if not exists tbl_mixing_det
(
	mixing_det_id 		integer not null default nextval('tbl_mixing_det_seq'),
	mixing_id				integer not null,
	source_product_id 		integer not null,
	source_bin_id 			integer not null,
	dest_product_id 		integer not null,
	dest_bin_id  			integer not null,	
	mixing_qty1  	numeric(20,4) not null,
	mixing_qty2		numeric(20,4) not null,
	source_image_url		text,	
	source_cost_price 		numeric(20,4),
	destination_image_url	text,	
	destination_cost_price 	numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(mixing_det_id),
	CONSTRAINT positive_qty1 CHECK (mixing_qty1 > 0),
	CONSTRAINT positive_qty2 CHECK (mixing_qty2 > 0),
	constraint tbl_mixing_det_fk1 FOREIGN KEY(mixing_id) REFERENCES tbl_mixing_main(mixing_id),
	constraint tbl_mixing_det_fk2 FOREIGN KEY(source_product_id) REFERENCES tbl_product(product_id),
	constraint tbl_mixing_det_fk3 FOREIGN KEY(source_bin_id) REFERENCES tbl_bin(bin_id),
	constraint tbl_mixing_det_fk4 FOREIGN KEY(dest_product_id) REFERENCES tbl_product(product_id),
	constraint tbl_mixing_det_fk5 FOREIGN KEY(dest_bin_id) REFERENCES tbl_bin(bin_id)

);



--Memo Purchase invoice module goes here
create SEQUENCE tbl_memo_purchase_invoice_main_seq;
create table if not exists tbl_memo_purchase_invoice_main
(
	inv_id integer not null default nextval('tbl_memo_purchase_invoice_main_seq'),
	inv_type varchar(50) not null,
	inv_no varchar(50) not null,
	inv_type_no varchar(50),
	REFERENCE_no varchar(50),
	inv_dt date not null,
	inv_due_dt	date not null,
	inv_due_months numeric(20,4) not null,
	inv_due_days numeric(20,4) not null,
	currency varchar(50) not null,
	exchange_rate numeric(20,4) not null,
	supplier_id integer not null,
	head_buyer_id integer,
	buyer_id integer,
	payment_type_id integer not null,
	shipment_type_id integer,
	shipment_company_name varchar(50),
	carrier_id integer,	
	tracking_no varchar(50),
	tracking_status varchar(50),
	inv_status	varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200) ,
	total_invoice_qty1 numeric(20,4) default 0 not null,
	total_invoice_qty2 numeric(20,4) default 0 not null,
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no	varchar(50),
	ship_mobile_no	varchar(50),
	note text,
	terms_conditions text,
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_memo_purchase_invoice_main_fk1 FOREIGN KEY(supplier_id) REFERENCES tbl_supplier(supplier_id),
	constraint tbl_memo_purchase_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_memo_purchase_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);



create SEQUENCE tbl_memo_purchase_invoice_det_seq;
create table if not exists tbl_memo_purchase_invoice_det
(
	inv_det_id integer not null default nextval('tbl_memo_purchase_invoice_det_seq'),
	inv_id 		integer not null,
	product_id 	integer not null,
	prod_description text,
	bin_id 		integer not null,
	inv_qty1	numeric(20,4) default 0 not null,
	inv_qty2	numeric(20,4) default 0 not null,
	uom1		varchar(50) not null,
	uom2 		varchar(50),
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	conf_qty1	numeric(20,4) default 0 not null,
	conf_qty2	numeric(20,4) default 0 not null,
	ret_qty1	numeric(20,4) default 0 not null,
	ret_qty2	numeric(20,4) default 0 not null,
	conf_input_rate	numeric(20,4) default 0 not null,
	conf_input_amt	numeric(20,4) default 0 not null,
	ret_input_rate	numeric(20,4) default 0 not null,
	ret_input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4),
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_memo_purchase_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_memo_purchase_invoice_main(inv_id),	
	CONSTRAINT tbl_memo_purchase_invoice_det_fk2 FOREIGN KEY(product_id) REFERENCES tbl_product(product_id),
	CONSTRAINT tbl_memo_purchase_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)	
);

create SEQUENCE tbl_memo_purchase_invoice_chgs_seq;
create table if not exists tbl_memo_purchase_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_memo_purchase_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_supplier_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_memo_purchase_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_memo_purchase_invoice_main(inv_id)
);

create SEQUENCE tbl_memo_purchase_return_invoice_main_seq;
create table if not exists tbl_memo_purchase_return_invoice_main
(
	inv_id integer not null default nextval('tbl_memo_purchase_return_invoice_main_seq'),
	inv_type varchar(50) not null,
	inv_no varchar(50) not null,
	inv_type_no varchar(50),
	REFERENCE_no varchar(50),
	inv_dt date not null,
	inv_due_dt	date not null,
	inv_due_months numeric(20,4) not null,
	inv_due_days numeric(20,4) not null,
	currency varchar(50) not null,
	exchange_rate numeric(20,4) not null,
	supplier_id integer not null,
	head_buyer_id integer,
	buyer_id integer,
	payment_type_id integer not null,
	shipment_type_id integer,
	shipment_company_name varchar(50),
	carrier_id integer,	
	tracking_no varchar(50),
	tracking_status varchar(50),
	inv_status	varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200) ,
	total_invoice_qty1 numeric(20,4) default 0 not null,
	total_invoice_qty2 numeric(20,4) default 0 not null,
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no	varchar(50),
	ship_mobile_no	varchar(50),
	note text,
	terms_conditions text,
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_memo_purchase_return_invoice_main_fk1 FOREIGN KEY(supplier_id) REFERENCES tbl_supplier(supplier_id),
	constraint tbl_memo_purchase_return_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_memo_purchase_return_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);



create SEQUENCE tbl_memo_purchase_return_invoice_det_seq;
create table if not exists tbl_memo_purchase_return_invoice_det
(
	inv_det_id integer not null default nextval('tbl_memo_purchase_return_invoice_det_seq'),
	inv_id 		integer not null,
	ref_inv_type varchar(30),
	ref_inv_id integer,
	ref_inv_det_id integer,
	product_id 	integer not null,
	prod_description text,
	bin_id 		integer not null,
	inv_qty1	numeric(20,4) default 0 not null,
	inv_qty2	numeric(20,4) default 0 not null,
	uom1		varchar(50) not null,
	uom2 		varchar(50),
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4),
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_memo_purchase_return_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_memo_purchase_return_invoice_main(inv_id),	
	CONSTRAINT tbl_memo_purchase_return_invoice_det_fk2 FOREIGN KEY(product_id) REFERENCES tbl_product(product_id),
	CONSTRAINT tbl_memo_purchase_return_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)	
);

create SEQUENCE tbl_memo_purchase_return_invoice_chgs_seq;
create table if not exists tbl_memo_purchase_return_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_memo_purchase_return_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_supplier_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_memo_purchase_return_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_memo_purchase_return_invoice_main(inv_id)
);

create SEQUENCE tbl_memo_sales_invoice_main_seq;
create table if not exists tbl_memo_sales_invoice_main
(
	inv_id integer not null default nextval('tbl_memo_sales_invoice_main_seq'),
	inv_type varchar(50) not null,
	inv_no varchar(50) not null,
	inv_type_no varchar(50),
	REFERENCE_no varchar(50),
	inv_dt date not null,
	inv_due_dt	date not null,
	inv_due_months numeric(20,4) not null,
	inv_due_days numeric(20,4) not null,
	currency varchar(50) not null,
	exchange_rate numeric(20,4) not null,
	customer_id integer not null,
	head_salesman_id integer,
	salesman_id integer,
	payment_type_id integer not null,
	shipment_type_id integer,
	shipment_company_name varchar(50),
	carrier_id integer,	
	tracking_no varchar(50),
	tracking_status varchar(50),
	inv_status	varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200) ,
	total_invoice_qty1 numeric(20,4) default 0 not null,
	total_invoice_qty2 numeric(20,4) default 0 not null,
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_received_amount		numeric(20,4) default 0 not null,
	billing_id integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no	varchar(50),
	ship_mobile_no	varchar(50),
	note text,
	terms_conditions text,
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_memo_sales_invoice_main_fk1 FOREIGN KEY(customer_id) REFERENCES tbl_customer(customer_id),
	constraint tbl_memo_sales_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_memo_sales_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_memo_sales_invoice_det_seq;
create table if not exists tbl_memo_sales_invoice_det
(
	inv_det_id integer not null default nextval('tbl_memo_sales_invoice_det_seq'),
	inv_id 		integer not null,
	bin_id 		integer not null,
	product_id 	integer not null,
	prod_description text,
	inv_qty1	numeric(20,4) default 0 not null,
	inv_qty2	numeric(20,4) default 0 not null,
	conf_qty1	numeric(20,4) default 0 not null,
	conf_qty2	numeric(20,4) default 0 not null,
	ret_qty1	numeric(20,4) default 0 not null,
	ret_qty2	numeric(20,4) default 0 not null,
	uom1		varchar(50) not null,
	uom2 		varchar(50),
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	conf_input_rate	numeric(20,4) default 0 not null,
	conf_input_amt	numeric(20,4) default 0 not null,
	ret_input_rate	numeric(20,4) default 0 not null,
	ret_input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4) default 0 not null,
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_memo_sales_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_memo_sales_invoice_main(inv_id)
);

create SEQUENCE tbl_memo_sales_invoice_chgs_seq;
create table if not exists tbl_memo_sales_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_memo_sales_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_customer_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_memo_sales_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_memo_sales_invoice_main(inv_id)
);

create SEQUENCE tbl_memo_sales_return_invoice_main_seq;
create table if not exists tbl_memo_sales_return_invoice_main
(
	inv_id integer not null default nextval('tbl_memo_sales_return_invoice_main_seq'),
	inv_type varchar(50) not null,
	inv_no varchar(50) not null,
	inv_type_no varchar(50),
	REFERENCE_no varchar(50),
	inv_dt date not null,
	inv_due_dt	date not null,
	inv_due_months numeric(20,4) not null,
	inv_due_days numeric(20,4) not null,
	currency varchar(50) not null,
	exchange_rate numeric(20,4) not null,
	customer_id integer not null,
	head_salesman_id integer,
	salesman_id integer,
	payment_type_id integer not null,
	shipment_type_id integer,
	shipment_company_name varchar(50),
	carrier_id integer,	
	tracking_no varchar(50),
	tracking_status varchar(50),
	inv_status	varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200) ,
	total_invoice_qty1 numeric(20,4) default 0 not null,
	total_invoice_qty2 numeric(20,4) default 0 not null,
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_received_amount		numeric(20,4) default 0 not null,
	billing_id integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no	varchar(50),
	ship_mobile_no	varchar(50),
	note text,
	terms_conditions text,
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_memo_sales_return_invoice_main_fk1 FOREIGN KEY(customer_id) REFERENCES tbl_customer(customer_id),
	constraint tbl_memo_sales_return_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_memo_sales_return_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_memo_sales_return_invoice_det_seq;
create table if not exists tbl_memo_sales_return_invoice_det
(
	inv_det_id integer not null default nextval('tbl_memo_sales_return_invoice_det_seq'),
	inv_id 		integer not null,
	ref_inv_type varchar(30),
	ref_inv_id integer,
	ref_inv_det_id integer,
	bin_id 		integer not null,
	product_id 	integer not null,
	prod_description text,
	inv_qty1	numeric(20,4) default 0 not null,
	inv_qty2	numeric(20,4) default 0 not null,
	
	conf_qty1	numeric(20,4) default 0 not null,
	conf_qty2	numeric(20,4) default 0 not null,

	ret_qty1	numeric(20,4) default 0 not null,
	ret_qty2	numeric(20,4) default 0 not null,
	
	uom1		varchar(50) not null,
	uom2 		varchar(50),
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	
	conf_input_rate	numeric(20,4) default 0 not null,
	conf_input_amt	numeric(20,4) default 0 not null,

	ret_input_rate	numeric(20,4) default 0 not null,
	ret_input_amt	numeric(20,4) default 0 not null,

	discount_type   varchar(50),
	discount_value    numeric(20,4) default 0 not null,
	
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_memo_sales_return_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_memo_sales_return_invoice_main(inv_id)
);

create SEQUENCE tbl_memo_sales_return_invoice_chgs_seq;
create table if not exists tbl_memo_sales_return_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_memo_sales_return_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_customer_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_memo_sales_return_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_memo_sales_return_invoice_main(inv_id)
);

-- Purchase order

create SEQUENCE tbl_purchase_order_main_seq;
create table if not exists tbl_purchase_order_main
(
	purchase_order_id	integer not null default nextval('tbl_purchase_order_main_seq'),
	purchase_order_type	varchar(30) not null,
	purchase_order_no	varchar(30) not null,
	purchase_order_date	date not null,
	reference_no		varchar(100),
	supplier_id			integer not null,
	buyer_id 			integer,
	payment_type_id 	integer,
	delivery_date		date not null,
	currency_code 	varchar(50) not null,
	exchange_rate 	numeric(20,4) default 0 not null,
	billing_id 			integer,
	bill_address1		varchar(200),
	bill_address2		varchar(200),
	bill_country		varchar(100),
	bill_state			varchar(100),
	bill_city			varchar(100),
	bill_street			varchar(100),
	bill_pincode		varchar(50),
	bill_website		varchar(50),
	bill_phone_no		varchar(50),
	bill_fax_no			varchar(50),
	bill_mobile_no		varchar(50),
	shipping_id 		integer,
	ship_address1		varchar(200),
	ship_address2		varchar(200),
	ship_country		varchar(100),
	ship_state			varchar(100),
	ship_city			varchar(100),
	ship_street			varchar(100),
	ship_pincode		varchar(50),
	ship_website		varchar(50),
	ship_phone_no		varchar(50),
	ship_fax_no			varchar(50),
	ship_mobile_no		varchar(50),
	po_status			varchar(50),
	total_qty1 numeric(20,4) default 0 not null,
	total_qty2 numeric(20,4) default 0 not null,
	total_amount	numeric(20,4) default 0 not null,
	invoice_status		Varchar(50),
	document			text,
	company_id 			integer not null,
	remarks				text,
	system_remarks		text,
	sort_seq			integer default 0 not null,
	is_locked			integer default 0 not null,
	created_by 			integer NOT NULL,
	created_dt			TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 		integer,
	modified_dt			TIMESTAMP,
	is_deleted			integer default 0 not null,
	PRIMARY KEY(purchase_order_id),
	constraint tbl_purchase_order_main_fk1 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_purchase_order_main_fk2 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)	
);

create SEQUENCE tbl_purchase_order_det_seq;
create table if not exists tbl_purchase_order_det
(
	purchase_order_det_id	integer not null default nextval('tbl_purchase_order_det_seq'),
	purchase_order_id 	integer not null,
	product_id		integer,
	commodity_id 		integer,	
	measurement_lxb_h 	varchar(100),	
	shape_id 			integer,
	cut_id 			integer,
	color_id 		integer,
	clarity_id 		integer,
	certified 		integer default 0,
	treated 		integer default 0,
	qty1 	numeric(20,2) default 0 not null,
	qty2 	numeric(20,2) default 0 not null,
	currency_code 	varchar(50),
	exchange_rate 	numeric(20,4),
	pp_rate 		numeric(20,4) default 0 not null,
	pp_amt 			numeric(20,4) default 0 not null,
	cancel_hold_status varchar(50),
	invoiced_qty 	numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(purchase_order_det_id),
	constraint tbl_purchase_order_det_fk1 FOREIGN key(purchase_order_id) references tbl_purchase_order_main(purchase_order_id)
);
-- Sales Order related tables

create SEQUENCE tbl_sales_order_main_seq;
create table if not exists tbl_sales_order_main
(
	sales_order_id	integer not null default nextval('tbl_sales_order_main_seq'),
	sales_order_type varchar(30) not null,
	sales_order_no	varchar(30) not null,
	sales_order_date	date not null,
	reference_no		varchar (100),
	customer_id			integer not null,
	delivery_date		date not null,
	currency_code 	varchar(50) not null,
	exchange_rate 	numeric(20,4) default 0 not null,
	billing_id 			integer,
	bill_address1		varchar(200),
	bill_address2		varchar(200),
	bill_country		varchar(100),
	bill_state			varchar(100),
	bill_city			varchar(100),
	bill_street			varchar(100),
	bill_pincode		varchar(50),
	bill_website		varchar(50),
	bill_phone_no		varchar(50),
	bill_fax_no			varchar(50),
	bill_mobile_no		varchar(50),
	shipping_id 		integer,
	ship_address1		varchar(200),
	ship_address2		varchar(200),
	ship_country		varchar(100),
	ship_state			varchar(100),
	ship_city			varchar(100),
	ship_street			varchar(100),
	ship_pincode		varchar(50),
	ship_website		varchar(50),
	ship_phone_no		varchar(50),
	ship_fax_no			varchar(50),
	ship_mobile_no		varchar(50),
	salesman_id 		integer,
	payment_type_id 	integer,
	so_status			varchar(50),
	total_qty1 numeric(20,4) default 0 not null,
	total_qty2 numeric(20,4) default 0 not null,
	total_amount	numeric(20,4) default 0 not null,
	invoice_status		Varchar(50),
	document			text,
	company_id 			integer not null,
	remarks				text,
	system_remarks		text,
	sort_seq			integer default 0 not null,
	is_locked			integer default 0 not null,
	created_by 			integer NOT NULL,
	created_dt			TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 		integer,
	modified_dt			TIMESTAMP,
	is_deleted			integer default 0 not null,
	PRIMARY KEY(sales_order_id),
	constraint tbl_sales_order_main_fk1 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_sales_order_main_fk2 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)	
);

create SEQUENCE tbl_sales_order_det_seq;
create table if not exists tbl_sales_order_det
(
	sales_order_det_id	integer not null default nextval('tbl_sales_order_det_seq'),
	sales_order_id 		integer not null,
	product_id			integer,
	commodity_id 		integer,	
	measurement_lxb_h 	varchar(100),
	shape_id 				integer,
	cut_id 					integer,
	color_id 				integer,
	clarity_id 			integer,
	certified 			integer default 0,
	treated 			integer default 0,
	qty1 				numeric(20,2) default 0 not null,
	qty2 				numeric(20,2) default 0 not null,
	currency_code 		varchar(50),
	exchange_rate 		numeric(20,4),
	sp_rate 			numeric(20,4) default 0 not null,
	sp_amt 				numeric(20,4) default 0 not null,	
	discount_type 		varchar(50),
	discount_value 		numeric(20,4),
	final_sp_amt		numeric(20,4) default 0 not null,
	cancel_hold_status 	varchar(50),
	invoiced_qty 		numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(sales_order_det_id),
	constraint tbl_sales_order_main_fk1 FOREIGN key(sales_order_id) references tbl_sales_order_main(sales_order_id)
);


-- Settlement module goes here
create SEQUENCE tbl_payment_received_main_seq;
create table if not exists tbl_payment_received_main
(

	payment_id 		integer not null default nextval('tbl_payment_received_main_seq'),
	payment_type    varchar(30) not null,
	payment_no      varchar(50) not null,
	reference_no    varchar(50),
	payment_dt      date not null,
	currency        varchar(50) not null,
	exchange_rate   numeric(20,4) default 0  not null,
	customer_id		integer not null,
	payment_mode    varchar(100),
	deposit_to 		varchar(100),
	note			text,
	received_amount	 numeric(20,4)  default 0 not null,
	bank_charges_amount numeric(20,4) default 0,
	company_id	integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(payment_id),
	constraint tbl_payment_received_main_fk1 FOREIGN key(customer_id) references tbl_customer(customer_id),
    constraint tbl_payment_received_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id)
);


create SEQUENCE tbl_payment_received_det_seq;
create table if not exists tbl_payment_received_det
(

	payment_det_id 		integer not null default nextval('tbl_payment_received_det_seq'),
	payment_id 	        integer not null,
	inv_type            varchar(30) not null,
	inv_id 		        integer not null,
	inv_type_no         varchar(50),
	inv_currency      varchar(30) not null,
    inv_exchange_rate numeric(20,4) default 0 not null,
	invoice_amount      numeric(20,4),
	received_amount	    numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(payment_det_id),
	constraint tbl_payment_received_det_fk1 FOREIGN key(payment_id) references tbl_payment_received_main(payment_id)
);


create SEQUENCE tbl_payment_paid_main_seq;
create table if not exists tbl_payment_paid_main
(

	payment_id 		integer not null default nextval('tbl_payment_paid_main_seq'),
	payment_type    varchar(30) not null,
	payment_no      varchar(50)  not null,
	reference_no    varchar(50),
	payment_dt      date  not null,
	currency        varchar(50)  not null,
	exchange_rate   numeric(20,4) default 0  not null,
	supplier_id		integer not null,
	payment_mode    varchar(100),
	paid_through 	varchar(100),
	note			text,
	paid_amount	 		numeric(20,4) default 0 not null,
	bank_charges_amount numeric(20,4) default 0,
	company_id	integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(payment_id),
	constraint tbl_payment_paid_main_fk1 FOREIGN key(supplier_id) references tbl_supplier(supplier_id),
	constraint tbl_payment_paid_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id)	
);

create SEQUENCE tbl_payment_paid_det_seq;
create table if not exists tbl_payment_paid_det
(

	payment_det_id 		integer not null default nextval('tbl_payment_paid_det_seq'),
	payment_id 	integer not null,
	inv_id 		integer not null,
	inv_type 	varchar(30) not null,
	inv_type_no 		varchar(50),
	inv_currency      varchar(30) not null,
    inv_exchange_rate numeric(20,4) default 0 not null,
	invoice_amount   numeric(20,4) default 0 not null,
	paid_amount	 	 numeric(20,4) default 0 not null,	
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(payment_det_id),
	constraint tbl_payment_paid_det_fk1 FOREIGN key(payment_id) references tbl_payment_paid_main(payment_id)
);


--- Jewellery part goes here
create SEQUENCE tbl_market_seq;
create table if not exists tbl_market
(

	market_id       integer not null default nextval('tbl_market_seq'),
	market_name     varchar(50),
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,	
	PRIMARY KEY(market_id)
);


create SEQUENCE tbl_product_type_seq;
create table if not exists tbl_product_type
(

	product_type_id       integer not null default nextval('tbl_product_type_seq'),
	product_type_name    varchar(50),
	units 			varchar(50),
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,	
	PRIMARY KEY(product_type_id)
);


create SEQUENCE tbl_collection_seq;
create table if not exists tbl_collection
(

	collection_id       integer not null default nextval('tbl_collection_seq'),
	collection_name    varchar(50),
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,	
	PRIMARY KEY(collection_id)
);


create SEQUENCE tbl_setting_type_seq;
create table if not exists tbl_setting_type
(

	setting_type_id       integer not null default nextval('tbl_setting_type_seq'),
	setting_type_name    varchar(50),
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,	
	PRIMARY KEY(setting_type_id)
);

--Stock Trans table
create SEQUENCE tbl_product_stock_trans_seq;
create table if not exists tbl_product_stock_trans
(
	trans_id 		integer not null default nextval('tbl_product_stock_trans_seq'),
	company_id 		integer,
	product_id 		integer,
	bin_id 			integer,
	inv_dt 			date,
	in_out_flag 	integer,
	qty1 			numeric(20,4),
	qty2 			numeric(20,4),
 	adj_qty1 		numeric(20,4),
	adj_qty2 		numeric(20,4),	
	party_type      varchar(50),
	party_id     	integer,
	currency_code	varchar(50),	
	inv_rate		numeric(20,4),
	cost_price		numeric(20,4),	
	inv_type  		varchar(50),
	inv_det_id  	integer,
	inv_id 			integer,
	remarks			text,
	system_remarks	text,

	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,	
	PRIMARY KEY(trans_id)
);
-- Stock table
create SEQUENCE tbl_product_stock_seq;
create table if not exists tbl_product_stock
(
	stock_id integer not null default nextval('tbl_product_stock_seq'),
	company_id integer,
	product_id integer,
	bin_id integer,
	in_qty1 numeric(20,4),
	in_qty2 numeric(20,4),
	out_qty1 numeric(20,4),
	out_qty2 numeric(20,4),
 	adj_in_qty1 numeric(20,4),
	adj_in_qty2 numeric(20,4),
	adj_out_qty1 numeric(20,4),
	adj_out_qty2 numeric(20,4),
	balance_qty1 numeric(20,4),
	balance_qty2 numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,	
	PRIMARY KEY(stock_id)
)
;


-- Accounting Service tables
create SEQUENCE tbl_schedule_seq;
create table if not exists tbl_schedule
(
	schedule_id  integer not null default nextval('tbl_schedule_seq'),
	schedule_name	varchar(100),
	schedule_nature varchar(50),
	dr_cr		varchar(30),
	description 		varchar(100),
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(schedule_id)
);

create SEQUENCE tbl_group_seq;
create table if not exists tbl_group
(
	group_id  integer not null default nextval('tbl_group_seq'),
	group_name	varchar(100),
	group_nature varchar(50),
	dr_cr		varchar(30),
	description 		varchar(100),
	schedule_id 	integer not null,	
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(group_id)
);

create SEQUENCE tbl_sub_group_seq;
create table if not exists tbl_sub_group
(
	subgroup_id  integer not null default nextval('tbl_sub_group_seq'),
	subgroup_name	varchar(100),
	subgroup_nature varchar(50),
	subgroup_dr_cr		varchar(30),
	description 		varchar(100),
	group_id 	integer not null,	
	subgroup_balance_type varchar(30),
	plus_minus_flag	integer,
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(subgroup_id)
);


create SEQUENCE tbl_cost_category_seq;
create table if not exists tbl_cost_category
(
	cost_category_id  integer not null default nextval('tbl_cost_category_seq'),
	cost_category_name	varchar(100),
	description 		varchar(100),
	cost_category_group varchar(100),
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(cost_category_id)
);

create SEQUENCE tbl_cost_center_seq;
create table if not exists tbl_cost_center
(
	cost_center_id  integer not null default nextval('tbl_cost_center_seq'),
	cost_center_name	varchar(100),
	description 		varchar(100),
	cost_category_id integer,
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(cost_center_id)
);


-- Accounting Service tables
create SEQUENCE tbl_ifrs_schedule_seq;
create table if not exists tbl_ifrs_schedule
(
	schedule_id  integer not null default nextval('tbl_ifrs_schedule_seq'),
	schedule_name	varchar(100),
	schedule_nature varchar(50),
	dr_cr		varchar(30),
	description 		varchar(100),
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(schedule_id)
);

create SEQUENCE tbl_ifrs_group_seq;
create table if not exists tbl_ifrs_group
(
	group_id  integer not null default nextval('tbl_ifrs_group_seq'),
	group_name	varchar(100),
	group_nature varchar(50),
	dr_cr		varchar(30),
	description 		varchar(100),
	schedule_id 	integer not null,	
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(group_id)
);

create SEQUENCE tbl_ifrs_sub_group_seq;
create table if not exists tbl_ifrs_sub_group
(
	subgroup_id  integer not null default nextval('tbl_ifrs_sub_group_seq'),
	subgroup_name	varchar(100),
	subgroup_nature varchar(50),
	subgroup_dr_cr		varchar(30),
	description 		varchar(100),
	group_id 	integer not null,	
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(subgroup_id)
);


-- Accounting Service tables
create SEQUENCE tbl_account_seq;
create table if not exists tbl_account
(
	account_id  		integer not null default nextval('tbl_account_seq'),
	account_code    	varchar(100) not null,
	account_name		varchar(100) not null,	
	account_no 			varchar(100),
	currency_code   	varchar(50),
	is_master_account 	integer 	default 0 not null,
	subgroup_id        	integer,
	ifrs_subgroup_id   	integer,
	account_nature 		varchar(50),
	dr_cr				varchar(30),
	description 		varchar(100),
	account_category	varchar(30),
	is_cost_center	integer default 0 not null,
	bank_name         varchar(50),
	bank_account_no   varchar(50),
	bank_ifsc_code    varchar(50),
	bank_swift_code   varchar(50),
	bank_payee_name	  varchar(50),
	bank_account_type varchar(30),
	bank_address	text,
	party_type		varchar(30),
	party_id		integer,
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(account_id)
);


create SEQUENCE tbl_jv_main_seq;
create table if not exists tbl_jv_main
(
	jv_main_id integer not null default nextval('tbl_jv_main_seq'),
	inv_type   varchar(50),
	inv_no 	   varchar(50),
	inv_dt     date,
	inv_due_dt date,
	reference_no varchar(100),
	currency     varchar(50),
	exchange_rate numeric(20,4),
	note 				text,
	status 			varchar(30) not null,
	description 	varchar(100),
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(jv_main_id)
);

create SEQUENCE tbl_jv_det_seq;
create table if not exists tbl_jv_det
(
	jv_det_id integer not null default nextval('tbl_jv_det_seq'),
	jv_main_id integer not null,
	account_id integer,
	description 		varchar(100),
	tax_pct  numeric(20,4),	
	debit_amount numeric(20,4),
	credit_amount numeric(20,4),
	debit_tax_amount numeric(20,4),
	credit_tax_amount numeric(20,4),

	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(jv_det_id)
);

create SEQUENCE tbl_jv_breakup_seq;
create table if not exists tbl_jv_breakup
(
	breakup_id integer not null default nextval('tbl_jv_breakup_seq'),
	jv_det_id integer not null,
	cost_center_id   integer ,
	cost_category_id integer ,

	description 		varchar(100),
	tax_pct  numeric(20,4),	
	debit_amount numeric(20,4),
	credit_amount numeric(20,4),
	debit_tax_amount numeric(20,4),
	credit_tax_amount numeric(20,4),

	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(breakup_id)
);

create SEQUENCE tbl_cash_pay_rec_main_seq;
create table if not exists tbl_cash_pay_rec_main
(
	inv_id integer not null default nextval('tbl_cash_pay_rec_main_seq'),
	inv_type   varchar(50)  not null,
	inv_no 	   varchar(50) not null,
	inv_dt     date not null,
	inv_due_dt date not null,
	reference_no varchar(100),
	currency     varchar(50) not null,
	exchange_rate numeric(20,4) not null,
	cash_account_id 	integer not null,
	note 				text,
	description 		varchar(100),
	status varchar(30) not null,
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id)
);

create SEQUENCE tbl_cash_pay_rec_det_seq;
create table if not exists tbl_cash_pay_rec_det
(
	inv_det_id 	integer not null default nextval('tbl_cash_pay_rec_det_seq'),
	inv_id 		integer not null,
	account_id 		integer not null,
	description 	varchar(100) ,
	tax_pct  		numeric(20,4) not null,	
	gross_amount 	numeric(20,4) not null,
	tax_amount 		numeric(20,4) not null,
	net_amount 		numeric(20,4) not null,

	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)
);

create SEQUENCE tbl_cash_pay_rec_breakup_seq;
create table if not exists tbl_cash_pay_rec_breakup
(
	breakup_id integer not null default nextval('tbl_cash_pay_rec_breakup_seq'),
	inv_type		 varchar(30) not null,	
	inv_det_id		 integer not null,
	cost_center_id   integer not null,
	cost_category_id integer not null,
	description 		varchar(100),
	tax_pct  numeric(20,4) not null,	
	gross_amount numeric(20,4) not null,
	tax_amount numeric(20,4) not null,
	net_amount numeric(20,4) not null,

	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(breakup_id)
);

create SEQUENCE tbl_bank_pay_rec_main_seq;
create table if not exists tbl_bank_pay_rec_main
(
	inv_id integer not null default nextval('tbl_bank_pay_rec_main_seq'),
	inv_type   varchar(50)  not null,
	inv_no 	   varchar(50) not null,
	inv_dt     date not null,
	inv_due_dt date not null,
	reference_no varchar(100),
	currency     varchar(50) not null,
	exchange_rate numeric(20,4) not null,
	bank_account_id 	integer not null,
	note 				text,
	description 		varchar(100),
	status varchar(30) not null,
	company_id		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id)
);

create SEQUENCE tbl_bank_pay_rec_det_seq;
create table if not exists tbl_bank_pay_rec_det
(
	inv_det_id 	integer not null default nextval('tbl_bank_pay_rec_det_seq'),
	inv_id 		integer not null,
	account_id 		integer not null,
	description 	varchar(100) ,
	tax_pct  		numeric(20,4) not null,	
	gross_amount 	numeric(20,4) not null,
	tax_amount 		numeric(20,4) not null,
	net_amount 		numeric(20,4) not null,

	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)
);

create SEQUENCE tbl_bank_pay_rec_breakup_seq;
create table if not exists tbl_bank_pay_rec_breakup
(
	breakup_id integer not null default nextval('tbl_bank_pay_rec_breakup_seq'),
	inv_type		 varchar(30) not null,	
	inv_det_id		 integer not null,
	cost_center_id   integer not null,
	cost_category_id integer not null,
	description 		varchar(100),
	tax_pct  numeric(20,4) not null,	
	gross_amount numeric(20,4) not null,
	tax_amount numeric(20,4) not null,
	net_amount numeric(20,4) not null,

	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(breakup_id)
);

create SEQUENCE tbl_debit_credit_note_main_seq;
create table tbl_debit_credit_note_main
(
	inv_id integer not null default nextval('tbl_debit_credit_note_main_seq'),
	inv_type varchar(50),
	inv_no varchar(50),
	inv_type_no varchar(50),
	REFERENCE_no varchar(50),
	inv_dt date,
	inv_due_dt	date,
	inv_due_months numeric(20,4),
	inv_due_days numeric(20,4),
	currency varchar(50),
	exchange_rate numeric(20,4),
	party_type varchar(50),
	party_id integer,
	employee_id integer,
	payment_type_id integer,
	payment_status		varchar(50),
	accounting_status	varchar(50),
	billing_id integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),	
	ship_phone_no	varchar(50),
	ship_fax_no	varchar(50),
	ship_mobile_no	varchar(50),
	note text,
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id)
);


create SEQUENCE tbl_debit_credit_note_det_seq;
create table if not exists tbl_debit_credit_note_det
(
	inv_det_id integer not null default nextval('tbl_debit_credit_note_det_seq'),
	inv_id integer not null,
	account_id 		integer,
	description 	varchar(100),
	tax_pct  		numeric(20,4),	
	amount 			numeric(20,4),
	tax_amount 		numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)
);


create SEQUENCE tbl_account_posting_main_seq;
create table tbl_account_posting_main
(
	posting_id integer not null default nextval('tbl_account_posting_main_seq'),
	inv_type varchar(30) not null,
	inv_id  integer not null,
	inv_no  varchar(30) not null,
	inv_dt  date not null,
	inv_due_dt date not null,
	reference_no varchar(100),
	currency varchar(30) not null,
	exchange_rate numeric(20,4) not null,	
	note1 text,
	note2 text,
	note3 text,
	company_id  	integer not null,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(posting_id)
);

create SEQUENCE tbl_account_posting_det_seq;
create table tbl_account_posting_det
(
	posting_det_id integer not null default nextval('tbl_account_posting_det_seq'),

	posting_id integer not null,
	account_id integer not null,
	cost_category_id integer,
	cost_center_id integer,
	in_out_flag integer not null,
	dr_cr varchar(30) not null,
	amount numeric(20,4) not null,

	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(posting_det_id)
);

create table if not exists tbl_party_account_register
(
    inv_type_id     varchar(50) not null,
	inv_id          integer not null,
	inv_type        varchar(30) not null,
	inv_no          varchar(30) not null,
	inv_dt          date not null,
	inv_due_dt      date not null,
	reference_no    varchar(100),
	currency        varchar(30) not null,
    exchange_rate   numeric(20,4) default 0.0 not null,
	inv_due_months  numeric(20, 4) default 0.0 not null,
	inv_due_days    numeric(20,4) default 0.0 not null,
	payment_type_id integer not null,
	party_type      varchar(30) not null,
	party_id        integer not null,
	party_type_id   varchar(50) not null,
    status 			varchar(30) default 'UNPAID' not null,
	in_out_flag 	integer not null,
	invoice_amount numeric(20,4) default 0.0 not null,
	settled_amount numeric(20, 4) default 0.0 not null,
	exch_diff_currency varchar(30),
	exch_diff_amount   numeric(20, 4),
	company_id integer not null,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_type_id)
);

create SEQUENCE tbl_rapaport_price_seq;
create table if not exists tbl_rapaport_price
(
	price_id 	integer not null default nextval('tbl_rapaport_price_seq'),
	price_dt 	date,
	shape 		varchar(50),
	color 		varchar(50),
	clarity 	varchar(50),
	highsize 	numeric(20,4),
	lowsize  	numeric(20,4),
	currency 	varchar(50),
	price 		numeric(20,4),
	company_id  integer,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(price_id)
);


create SEQUENCE tbl_design_seq;
create table tbl_design
(
	design_id       integer not null default nextval('tbl_design_seq'),
	design_no 		varchar(100) not null,
	product_type_id integer not null,
	market_id 		integer,
	product_size	varchar(100),
	customer_id		integer,
	designer_id		integer,
	collection_id	integer,
	factory_id		integer,
	description		text,
	image_url		varchar(100),
	metal_weight	numeric(20,2) default 0 not null,
	labour_currency		varchar(50),
	exchange_rate	numeric(20,2) default 0 not null,	
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(design_id),
	constraint tbl_design_fk1 FOREIGN key(product_type_id) references tbl_product_type(product_type_id),
	constraint tbl_design_fk2 FOREIGN key(market_id) references tbl_market(market_id),
	constraint tbl_design_fk3 FOREIGN key(customer_id) references tbl_customer(customer_id)
);

create SEQUENCE tbl_design_component_seq;
create table if not exists tbl_design_component
(
	design_component_id integer not null default nextval('tbl_design_component_seq'),
	design_id 		integer,
	product_id 		integer,
	commodity_id 	integer not null,
	shape_id		integer,
	color_id		integer,
	cut_id 			integer,
	setting_type varchar(50),
	sieve_size   varchar(50),
	mm_size   	 varchar(50),
	qty1		numeric(20,2) default 0 not null,
	qty2		numeric(20,2) default 0 not null,
	is_center_stone integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(design_component_id),
	constraint tbl_design_component_fk1 FOREIGN key(design_id) references tbl_design(design_id)
);


create SEQUENCE tbl_sku_seq;
create table tbl_sku
(
	sku_id       integer not null default nextval('tbl_sku_seq'),
	sku_no 		varchar(100) not null,
	product_type_id integer not null,
	market_id 		integer,
	product_size	varchar(100),
	customer_id		integer,
	designer_id		integer,
	collection_id	integer,
	factory_id		integer,
	description		text,
	image_url		varchar(100),
	metal_weight	numeric(20,2) default 0 not null,
	labour_currency		varchar(50),
	exchange_rate	numeric(20,2) default 0 not null,	
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(sku_id),
	constraint tbl_sku_fk1 FOREIGN key(product_type_id) references tbl_product_type(product_type_id),
	constraint tbl_sku_fk2 FOREIGN key(market_id) references tbl_market(market_id),
	constraint tbl_sku_fk3 FOREIGN key(customer_id) references tbl_customer(customer_id)
);

create SEQUENCE tbl_sku_component_seq;
create table if not exists tbl_sku_component
(
	sku_component_id integer not null default nextval('tbl_sku_component_seq'),
	sku_id 		integer,
	product_id 		integer,
	commodity_id 	integer not null,
	shape_id		integer,
	color_id		integer,
	cut_id 			integer,
	setting_type varchar(50),
	sieve_size   varchar(50),
	mm_size   	 varchar(50),
	qty1		numeric(20,2) default 0 not null,
	qty2		numeric(20,2) default 0 not null,
	is_center_stone integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(sku_component_id),
	constraint tbl_sku_component_fk1 FOREIGN key(sku_id) references tbl_sku(sku_id)
);
-- Jewellery Invoices
create SEQUENCE tbl_jewellery_seq;
create table tbl_jewellery
(

	jew_id 			integer not null default nextval('tbl_jewellery_seq'),
	jew_type		varchar(50) not null,
	jew_no 			varchar(100) not null,
	sku_id          integer,
	sku_no          varchar(100),
	design_id       integer,
	design_no       varchar(100),
	product_type_id integer,
	prod_description text,
	market_id        integer,
	product_size     varchar(50),
	customer_id      integer,
	salesman_id      integer,
	collection_id    integer,
	supplier_id      integer,
	description      text,
	image_url        varchar(200),
	metal1           varchar(50),
	metal2			varchar(50),
	metal3			varchar(50),
	metal_weight    numeric(20,4),
	currency        varchar(50),
	labour_amount   numeric(20,4),
	stamping_details text,
	qty 			numeric(20,4),
	uom 			varchar(50),
	cost_price 		numeric(20,4),
	sales_price		numeric(20,4),
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(jew_id)	,
	CONSTRAINT tbl_jewellery_fk1 FOREIGN KEY(product_type_id) REFERENCES tbl_product_type(product_type_id),
	CONSTRAINT tbl_jewellery_fk2 FOREIGN KEY(market_id) REFERENCES tbl_market(market_id),
	CONSTRAINT tbl_jewellery_fk3 FOREIGN KEY(customer_id) REFERENCES tbl_customer(customer_id),
	CONSTRAINT tbl_jewellery_fk4 FOREIGN KEY(salesman_id) REFERENCES tbl_employee(employee_id),
	CONSTRAINT tbl_jewellery_fk5 FOREIGN KEY(collection_id) REFERENCES tbl_collection(collection_id),
	CONSTRAINT tbl_jewellery_fk6 FOREIGN KEY(supplier_id) REFERENCES tbl_supplier(supplier_id)
);

-- Jewellery Components

create SEQUENCE tbl_jewellery_component_seq;
create table tbl_jewellery_component
(

	jew_component_id 			integer not null default nextval('tbl_jewellery_component_seq'),
	jew_id 			integer not null,
	product_id 		integer,
	commodity_id integer not null,
	shape_id integer,
	color_id integer,
	cut_id integer,
	clarity_id integer,
	sieve_size varchar(50),
	mm_size	varchar(50),
	consumed_qty1 numeric(20,2) default 0 not null,
	consumed_qty2 numeric(20,2) default 0 not null,
	broken_qty1   numeric(20,2) default 0 not null,
	broken_qty2   numeric(20,2) default 0 not null,
	loss_qty1     numeric(20,2) default 0 not null,
	loss_qty2     numeric(20,2) default 0 not null,
	original_broken_qty1 numeric(20,2) default 0 not null,
	original_broken_qty2 numeric(20,2) default 0 not null,
	original_loss_qty1 numeric(20,2) default 0 not null,
	original_loss_qty2 numeric(20,2) default 0 not null,
	total_qty1 numeric(20,2) default 0 not null,
	total_qty2  numeric(20,2) default 0 not null,
	setting_type_id integer,
	is_center_stone integer default 0 not null,
	currency varchar(30),
	exchange_rate numeric(20,2),
	pp_rate numeric(20,2) default 0 not null,	
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(jew_component_id)	,
	CONSTRAINT tbl_jewellery_component FOREIGN KEY(jew_id) REFERENCES tbl_jewellery(jew_id)
);

--Jewellery Purchase invoice module goes here
create SEQUENCE tbl_jew_purchase_invoice_main_seq;
create table if not exists tbl_jew_purchase_invoice_main
(
	inv_id 		integer not null default nextval('tbl_jew_purchase_invoice_main_seq'),
	inv_type 	varchar(50) not null,
	inv_no 		varchar(50) not null,
	REFERENCE_no 	varchar(50) ,
	inv_dt 			date not null,
	inv_due_dt		date not null,
	inv_due_months 	numeric(20,4) not null,
	inv_due_days 	numeric(20,4) not null,
	currency 		varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
	supplier_id 	integer not null,
	head_buyer_id 	integer,
	buyer_id 		integer,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	shipment_company_name varchar(50),
	carrier_id 			integer,	
	tracking_no 		varchar(50),
	tracking_status 	varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	note 			text,
	terms_conditions text,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_jew_purchase_invoice_main_fk1 FOREIGN KEY(supplier_id) REFERENCES tbl_supplier(supplier_id),
	constraint tbl_jew_purchase_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_jew_purchase_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_jew_purchase_invoice_det_seq;
create table if not exists tbl_jew_purchase_invoice_det
(
	inv_det_id 	integer not null default nextval('tbl_jew_purchase_invoice_det_seq'),
	inv_id 		integer not null,
	jew_id 		integer not null,
	prod_description text,
	bin_id 		integer not null,
	inv_qty	numeric(20,4) default 0 not null,
	uom		varchar(50) not null,
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4),
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_jew_purchase_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_purchase_invoice_main(inv_id),
	CONSTRAINT tbl_jew_purchase_invoice_det_fk2 FOREIGN KEY(jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_jew_purchase_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);

create SEQUENCE tbl_jew_purchase_invoice_chgs_seq;
create table if not exists tbl_jew_purchase_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_jew_purchase_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_supplier_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_jew_purchase_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_purchase_invoice_main(inv_id)
);



--Jewellery Purchase invoice module goes here
create SEQUENCE tbl_jew_purchase_return_invoice_main_seq;
create table if not exists tbl_jew_purchase_return_invoice_main
(
	inv_id 		integer not null default nextval('tbl_jew_purchase_return_invoice_main_seq'),
	inv_type 	varchar(50) not null,
	inv_no 		varchar(50) not null,
	REFERENCE_no 	varchar(50) ,
	inv_dt 			date not null,
	inv_due_dt		date not null,
	inv_due_months 	numeric(20,4) not null,
	inv_due_days 	numeric(20,4) not null,
	currency 		varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
	supplier_id 	integer not null,
	head_buyer_id 	integer,
	buyer_id 		integer,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	shipment_company_name varchar(50),
	carrier_id 			integer,	
	tracking_no 		varchar(50),
	tracking_status 	varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	note 			text,
	terms_conditions text,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_jew_purchase_return_invoice_main_fk1 FOREIGN KEY(supplier_id) REFERENCES tbl_supplier(supplier_id),
	constraint tbl_jew_purchase_return_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_jew_purchase_return_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_jew_purchase_return_invoice_det_seq;
create table if not exists tbl_jew_purchase_return_invoice_det
(
	inv_det_id 	integer not null default nextval('tbl_jew_purchase_return_invoice_det_seq'),
	inv_id 		integer not null,
	jew_id 		integer not null,
	prod_description text,
	bin_id 		integer not null,
	inv_qty	numeric(20,4) default 0 not null,
	uom		varchar(50) not null,
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4),
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_jew_purchase_return_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_purchase_return_invoice_main(inv_id),
	CONSTRAINT tbl_jew_purchase_return_invoice_det_fk2 FOREIGN KEY(jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_jew_purchase_return_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);

create SEQUENCE tbl_jew_purchase_return_invoice_chgs_seq;
create table if not exists tbl_jew_purchase_return_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_jew_purchase_return_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_supplier_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_jew_purchase_return_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_purchase_return_invoice_main(inv_id)
);

--Jewellery Purchase invoice module goes here
create SEQUENCE tbl_jew_memo_purchase_invoice_main_seq;
create table if not exists tbl_jew_memo_purchase_invoice_main
(
	inv_id 		integer not null default nextval('tbl_jew_memo_purchase_invoice_main_seq'),
	inv_type 	varchar(50) not null,
	inv_no 		varchar(50) not null,
	REFERENCE_no 	varchar(50) ,
	inv_dt 			date not null,
	inv_due_dt		date not null,
	inv_due_months 	numeric(20,4) not null,
	inv_due_days 	numeric(20,4) not null,
	currency 		varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
	supplier_id 	integer not null,
	head_buyer_id 	integer,
	buyer_id 		integer,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	shipment_company_name varchar(50),
	carrier_id 			integer,	
	tracking_no 		varchar(50),
	tracking_status 	varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	note 			text,
	terms_conditions text,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_jew_memo_purchase_invoice_main_fk1 FOREIGN KEY(supplier_id) REFERENCES tbl_supplier(supplier_id),
	constraint tbl_jew_memo_purchase_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_jew_memo_purchase_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_jew_memo_purchase_invoice_det_seq;
create table if not exists tbl_jew_memo_purchase_invoice_det
(
	inv_det_id 	integer not null default nextval('tbl_jew_memo_purchase_invoice_det_seq'),
	inv_id 		integer not null,
	jew_id 		integer not null,
	prod_description text,
	bin_id 		integer not null,
	inv_qty	numeric(20,4) default 0 not null,
	uom		varchar(50) not null,
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4),
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_jew_memo_purchase_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_memo_purchase_invoice_main(inv_id),
	CONSTRAINT tbl_jew_memo_purchase_invoice_det_fk2 FOREIGN KEY(jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_jew_memo_purchase_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);

create SEQUENCE tbl_jew_memo_purchase_invoice_chgs_seq;
create table if not exists tbl_jew_memo_purchase_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_jew_memo_purchase_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_supplier_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_jew_memo_purchase_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_memo_purchase_invoice_main(inv_id)
);

--Jewellery Purchase invoice module goes here
create SEQUENCE tbl_jew_memo_purchase_return_invoice_main_seq;
create table if not exists tbl_jew_memo_purchase_return_invoice_main
(
	inv_id 		integer not null default nextval('tbl_jew_memo_purchase_return_invoice_main_seq'),
	inv_type 	varchar(50) not null,
	inv_no 		varchar(50) not null,
	REFERENCE_no 	varchar(50) ,
	inv_dt 			date not null,
	inv_due_dt		date not null,
	inv_due_months 	numeric(20,4) not null,
	inv_due_days 	numeric(20,4) not null,
	currency 		varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
	supplier_id 	integer not null,
	head_buyer_id 	integer,
	buyer_id 		integer,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	shipment_company_name varchar(50),
	carrier_id 			integer,	
	tracking_no 		varchar(50),
	tracking_status 	varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	note 			text,
	terms_conditions text,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_jew_memo_purchase_return_invoice_main_fk1 FOREIGN KEY(supplier_id) REFERENCES tbl_supplier(supplier_id),
	constraint tbl_jew_memo_purchase_return_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_jew_memo_purchase_return_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_jew_memo_purchase_return_invoice_det_seq;
create table if not exists tbl_jew_memo_purchase_return_invoice_det
(
	inv_det_id 	integer not null default nextval('tbl_jew_memo_purchase_return_invoice_det_seq'),
	inv_id 		integer not null,
	jew_id 		integer not null,
	prod_description text,
	bin_id 		integer not null,
	inv_qty	numeric(20,4) default 0 not null,
	uom		varchar(50) not null,
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4),
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_jew_memo_purchase_return_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_memo_purchase_return_invoice_main(inv_id),
	CONSTRAINT tbl_jew_memo_purchase_return_invoice_det_fk2 FOREIGN KEY(jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_jew_memo_purchase_return_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);

create SEQUENCE tbl_jew_memo_purchase_return_invoice_chgs_seq;
create table if not exists tbl_jew_memo_purchase_return_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_jew_memo_purchase_return_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_supplier_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_jew_memo_purchase_return_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_memo_purchase_return_invoice_main(inv_id)
);

--Jewellery Purchase invoice module goes here
create SEQUENCE tbl_jew_sales_invoice_main_seq;
create table if not exists tbl_jew_sales_invoice_main
(
	inv_id 		integer not null default nextval('tbl_jew_sales_invoice_main_seq'),
	inv_type 	varchar(50) not null,
	inv_no 		varchar(50) not null,
	REFERENCE_no 	varchar(50) ,
	inv_dt 			date not null,
	inv_due_dt		date not null,
	inv_due_months 	numeric(20,4) not null,
	inv_due_days 	numeric(20,4) not null,
	currency 		varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
	customer_id 	integer not null,
	head_salesman_id 	integer,
	salesman_id 		integer,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	shipment_company_name varchar(50),
	carrier_id 			integer,	
	tracking_no 		varchar(50),
	tracking_status 	varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	note 			text,
	terms_conditions text,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_jew_sales_invoice_main_fk1 FOREIGN KEY(customer_id) REFERENCES tbl_customer(customer_id),
	constraint tbl_jew_sales_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_jew_sales_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_jew_sales_invoice_det_seq;
create table if not exists tbl_jew_sales_invoice_det
(
	inv_det_id 	integer not null default nextval('tbl_jew_sales_invoice_det_seq'),
	inv_id 		integer not null,
	jew_id 		integer not null,
	prod_description text,
	bin_id 		integer not null,
	inv_qty	numeric(20,4) default 0 not null,
	uom		varchar(50) not null,
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4),
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_jew_sales_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_sales_invoice_main(inv_id),
	CONSTRAINT tbl_jew_sales_invoice_det_fk2 FOREIGN KEY(jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_jew_sales_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);

create SEQUENCE tbl_jew_sales_invoice_chgs_seq;
create table if not exists tbl_jew_sales_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_jew_sales_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_customer_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_jew_sales_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_sales_invoice_main(inv_id)
);


create SEQUENCE tbl_jew_sales_return_invoice_main_seq;
create table if not exists tbl_jew_sales_return_invoice_main
(
	inv_id 		integer not null default nextval('tbl_jew_sales_return_invoice_main_seq'),
	inv_type 	varchar(30) not null,
	inv_no 		varchar(30) not null,
	REFERENCE_no varchar(50),
	inv_dt 		date not null,
	inv_due_dt	date not null,
	inv_due_months numeric(20,4) default 0 not null,
	inv_due_days 	numeric(20,4) default 0 not null,
	currency 		varchar(50) not null,
	exchange_rate numeric(20,4) default 0 not null,
	customer_id integer not null,
	head_salesman_id 	integer not null,
	salesman_id 		integer not null,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	carrier_id 		integer,
	shipment_company_name varchar(50),
	tracking_no varchar(50),
	tracking_status varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_amount		numeric(20,4) default 0 not null,
	total_received_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),	
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_jew_sales_return_invoice_main_fk1 FOREIGN KEY(customer_id) REFERENCES tbl_customer(customer_id),
	CONSTRAINT tbl_jew_sales_return_invoice_main_fk2 FOREIGN KEY(payment_type_id) REFERENCES tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_jew_sales_return_invoice_det_seq;
create table if not exists tbl_jew_sales_return_invoice_det
(
	inv_det_id 		integer not null default nextval('tbl_jew_sales_return_invoice_det_seq'),
	inv_id 			integer not null,
	ref_inv_type varchar(30),
	ref_inv_id integer,
	jew_id 		integer not null,
	bin_id 			integer not null,
	prod_description text,
	inv_qty1	numeric(20,4) default 0 not null,
	inv_qty2	numeric(20,4) default 0 not null,
	uom1		varchar(50) not null,
	uom2 		varchar(50),
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4) default 0 not null,
	cost_price 		numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_jew_sales_return_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_sales_return_invoice_main(inv_id),
	CONSTRAINT tbl_jew_sales_return_invoice_det_fk2 FOREIGN KEY(jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_jew_sales_return_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);


create SEQUENCE tbl_jew_sales_return_invoice_chgs_seq;
create table if not exists tbl_jew_sales_return_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_jew_sales_return_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_customer_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_jew_sales_return_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_sales_return_invoice_main(inv_id)
);

create SEQUENCE tbl_jew_memo_sales_invoice_main_seq;
create table if not exists tbl_jew_memo_sales_invoice_main
(
	inv_id integer not null default nextval('tbl_jew_memo_sales_invoice_main_seq'),
	inv_type varchar(50) not null,
	inv_no varchar(50) not null,
	inv_type_no varchar(50),
	REFERENCE_no varchar(50),
	inv_dt date not null,
	inv_due_dt	date not null,
	inv_due_months numeric(20,4) not null,
	inv_due_days numeric(20,4) not null,
	currency varchar(50) not null,
	exchange_rate numeric(20,4) not null,
	customer_id integer not null,
	head_salesman_id integer,
	salesman_id integer,
	payment_type_id integer not null,
	shipment_type_id integer,
	shipment_company_name varchar(50),
	carrier_id integer,	
	tracking_no varchar(50),
	tracking_status varchar(50),
	inv_status	varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200) ,
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_received_amount		numeric(20,4) default 0 not null,
	billing_id integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no	varchar(50),
	ship_mobile_no	varchar(50),
	note text,
	terms_conditions text,
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_jew_memo_sales_invoice_main_fk1 FOREIGN KEY(customer_id) REFERENCES tbl_customer(customer_id),
	constraint tbl_jew_memo_sales_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_jew_memo_sales_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_jew_memo_sales_invoice_det_seq;
create table if not exists tbl_jew_memo_sales_invoice_det
(
	inv_det_id integer not null default nextval('tbl_jew_memo_sales_invoice_det_seq'),
	inv_id 		integer not null,
	bin_id 		integer not null,
	jew_id 	integer not null,
	prod_description text,
	inv_qty	numeric(20,4) default 0 not null,
	conf_qty	numeric(20,4) default 0 not null,
	ret_qty	numeric(20,4) default 0 not null,
	uom		varchar(50) not null,
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	
	conf_input_rate	numeric(20,4) default 0 not null,
	conf_input_amt	numeric(20,4) default 0 not null,

	ret_input_rate	numeric(20,4) default 0 not null,
	ret_input_amt	numeric(20,4) default 0 not null,

	discount_type   varchar(50),
	discount_value    numeric(20,4) default 0 not null,
	
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_jew_memo_sales_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_memo_sales_invoice_main(inv_id)
);

create SEQUENCE tbl_jew_memo_sales_invoice_chgs_seq;
create table if not exists tbl_jew_memo_sales_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_jew_memo_sales_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_customer_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_jew_memo_sales_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_memo_sales_invoice_main(inv_id)
);

create SEQUENCE tbl_jew_memo_sales_return_invoice_main_seq;
create table if not exists tbl_jew_memo_sales_return_invoice_main
(
	inv_id integer not null default nextval('tbl_jew_memo_sales_return_invoice_main_seq'),
	inv_type varchar(50) not null,
	inv_no varchar(50) not null,
	inv_type_no varchar(50),
	REFERENCE_no varchar(50),
	inv_dt date not null,
	inv_due_dt	date not null,
	inv_due_months numeric(20,4) not null,
	inv_due_days numeric(20,4) not null,
	currency varchar(50) not null,
	exchange_rate numeric(20,4) not null,
	customer_id integer not null,
	head_salesman_id integer,
	salesman_id integer,
	payment_type_id integer not null,
	shipment_type_id integer,
	shipment_company_name varchar(50),
	carrier_id integer,	
	tracking_no varchar(50),
	tracking_status varchar(50),
	inv_status	varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200) ,
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_received_amount		numeric(20,4) default 0 not null,
	billing_id integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no	varchar(50),
	ship_mobile_no	varchar(50),
	note text,
	terms_conditions text,
	company_id integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_jew_memo_sales_return_invoice_main_fk1 FOREIGN KEY(customer_id) REFERENCES tbl_customer(customer_id),
	constraint tbl_jew_memo_sales_return_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_jew_memo_sales_return_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_jew_memo_sales_return_invoice_det_seq;
create table if not exists tbl_jew_memo_sales_return_invoice_det
(
	inv_det_id integer not null default nextval('tbl_jew_memo_sales_return_invoice_det_seq'),
	inv_id 		integer not null,
	ref_inv_type varchar(30),
	ref_inv_id integer,
	bin_id 		integer not null,
	jew_id 	integer not null,
	prod_description text,
	inv_qty	numeric(20,4) default 0 not null,
	conf_qty	numeric(20,4) default 0 not null,
	ret_qty	numeric(20,4) default 0 not null,
	uom		varchar(50) not null,
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,	
	conf_input_rate	numeric(20,4) default 0 not null,
	conf_input_amt	numeric(20,4) default 0 not null,
	ret_input_rate	numeric(20,4) default 0 not null,
	ret_input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4) default 0 not null,	
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_jew_memo_sales_return_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_memo_sales_return_invoice_main(inv_id)
);

create SEQUENCE tbl_jew_memo_sales_return_invoice_chgs_seq;
create table if not exists tbl_jew_memo_sales_return_invoice_chgs
(
	charge_id  integer not null default nextval('tbl_jew_memo_sales_return_invoice_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_customer_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_jew_memo_sales_return_invoice_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_jew_memo_sales_return_invoice_main(inv_id)
);



create SEQUENCE tbl_jew_purchase_order_main_seq;
create table if not exists tbl_jew_purchase_order_main
(
	purchase_order_id	integer not null default nextval('tbl_jew_purchase_order_main_seq'),
	purchase_order_type	varchar(30) not null,
	purchase_order_no	varchar(30) not null,
	purchase_order_date	date not null,
	reference_no		varchar(100),
	supplier_id			integer not null,
	buyer_id 			integer,
	payment_type_id 	integer,
	delivery_date		date not null,	
	billing_id 			integer,
	bill_address1		varchar(200),
	bill_address2		varchar(200),
	bill_country		varchar(100),
	bill_state			varchar(100),
	bill_city			varchar(100),
	bill_street			varchar(100),
	bill_pincode		varchar(50),
	bill_website		varchar(50),
	bill_phone_no		varchar(50),
	bill_fax_no			varchar(50),
	bill_mobile_no		varchar(50),
	shipping_id 		integer,
	ship_address1		varchar(200),
	ship_address2		varchar(200),
	ship_country		varchar(100),
	ship_state			varchar(100),
	ship_city			varchar(100),
	ship_street			varchar(100),
	ship_pincode		varchar(50),
	ship_website		varchar(50),
	ship_phone_no		varchar(50),
	ship_fax_no			varchar(50),
	ship_mobile_no		varchar(50),
	po_status			varchar(50),
	invoice_status		Varchar(50),
	document			text,
	company_id 			integer not null,
	remarks				text,
	system_remarks		text,
	sort_seq			integer default 0 not null,
	is_locked			integer default 0 not null,
	created_by 			integer NOT NULL,
	created_dt			TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 		integer,
	modified_dt			TIMESTAMP,
	is_deleted			integer default 0 not null,
	PRIMARY KEY(purchase_order_id),
	constraint tbl_jew_purchase_order_main_fk1 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_jew_purchase_order_main_fk2 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)	
);

create SEQUENCE tbl_jew_purchase_order_det_seq;
create table if not exists tbl_jew_purchase_order_det
(
	purchase_order_det_id	integer not null default nextval('tbl_jew_purchase_order_det_seq'),
	purchase_order_id 	integer not null,
	sku_id		integer,
	sku_no		varchar(100) not null,
	product_type_id integer not null,
	product_size	varchar(50),
	description text,	
	qty 	numeric(20,2) default 0 not null,
	metal	varchar(100) not null,
	stamping_details text,
	currency_code 	varchar(50),
	exchange_rate 	numeric(20,4),
	pp_rate 		numeric(20,4) default 0 not null,
	pp_amt 			numeric(20,4) default 0 not null,
	cancel_hold_status varchar(50),
	invoiced_qty 	numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(purchase_order_det_id),
	constraint tbl_jew_purchase_order_det_fk1 FOREIGN key(purchase_order_id) references tbl_jew_purchase_order_main(purchase_order_id)
);

create SEQUENCE tbl_jew_sales_order_main_seq;
create table if not exists tbl_jew_sales_order_main
(
	sales_order_id	integer not null default nextval('tbl_jew_sales_order_main_seq'),
	sales_order_type varchar(30) not null,
	sales_order_no	varchar(30) not null,
	sales_order_date	date not null,
	reference_no		varchar (100),
	customer_id			integer not null,
	delivery_date		date not null,
	billing_id 			integer,
	bill_address1		varchar(200),
	bill_address2		varchar(200),
	bill_country		varchar(100),
	bill_state			varchar(100),
	bill_city			varchar(100),
	bill_street			varchar(100),
	bill_pincode		varchar(50),
	bill_website		varchar(50),
	bill_phone_no		varchar(50),
	bill_fax_no			varchar(50),
	bill_mobile_no		varchar(50),
	shipping_id 		integer,
	ship_address1		varchar(200),
	ship_address2		varchar(200),
	ship_country		varchar(100),
	ship_state			varchar(100),
	ship_city			varchar(100),
	ship_street			varchar(100),
	ship_pincode		varchar(50),
	ship_website		varchar(50),
	ship_phone_no		varchar(50),
	ship_fax_no			varchar(50),
	ship_mobile_no		varchar(50),
	salesman_id 		integer,
	payment_type_id 	integer,
	so_status			varchar(50),
	invoice_status		Varchar(50),
	document			text,
	company_id 			integer not null,
	remarks				text,
	system_remarks		text,
	sort_seq			integer default 0 not null,
	is_locked			integer default 0 not null,
	created_by 			integer NOT NULL,
	created_dt			TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 		integer,
	modified_dt			TIMESTAMP,
	is_deleted			integer default 0 not null,
	PRIMARY KEY(sales_order_id),
	constraint tbl_jew_sales_order_main_fk1 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_jew_sales_order_main_fk2 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)	
);

create SEQUENCE tbl_jew_sales_order_det_seq;
create table if not exists tbl_jew_sales_order_det
(
	sales_order_det_id	integer not null default nextval('tbl_jew_sales_order_det_seq'),
	sales_order_id 		integer not null,
	sku_id		integer,
	sku_no		varchar(100) not null,
	product_type_id integer not null,
	product_size	varchar(50),
	description text,	
	qty 	numeric(20,2) default 0 not null,
	metal	varchar(100) not null,
	stamping_details text,
	currency_code 	varchar(50),
	exchange_rate 	numeric(20,4),
	pp_rate 		numeric(20,4) default 0 not null,
	pp_amt 			numeric(20,4) default 0 not null,
	cancel_hold_status varchar(50),
	invoiced_qty 	numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(sales_order_det_id),
	constraint tbl_jew_sales_order_main_fk1 FOREIGN key(sales_order_id) references tbl_jew_sales_order_main(sales_order_id)
);


create sequence tbl_factory_chart_seq;
create table if not exists tbl_factory_chart
(
	factory_chart_id	integer not null default nextval('tbl_factory_chart_seq'),
	factory_id integer not null,
	currency varchar(30),
	exchange_rate   numeric(20,2),
	company_id      integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(factory_chart_id),
	constraint tbl_factory_chart_fk1 FOREIGN key(factory_id) references tbl_factory(factory_id)
);



create sequence tbl_factory_chart_det_seq;
create table if not exists tbl_factory_chart_det
(
	factory_chart_det_id integer not null default nextval('tbl_factory_chart_det_seq'),
	factory_chart_id 	 integer not null,
	labour_type 		 varchar(50) not null,
	amount_pct_type varchar(30) default 'AMOUNT' not null,
	amount_pct_value numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(factory_chart_det_id),
	constraint tbl_factory_chart_det_fk1 FOREIGN key(factory_chart_id) references tbl_factory_chart(factory_chart_id)
);

create SEQUENCE tbl_factory_invoice_main_seq;
create table if not exists tbl_factory_invoice_main
(
	inv_id 		integer not null default nextval('tbl_factory_invoice_main_seq'),
	inv_type 	varchar(50) not null,
	inv_no 		varchar(50) not null,
	reference_no 	varchar(50) ,
	inv_dt 			date not null,
	inv_due_dt		date not null,
	inv_due_months 	numeric(20,4) not null,
	inv_due_days 	numeric(20,4) not null,
	currency 		varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
	factory_id 	integer not null,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	shipment_company_name varchar(50),
	carrier_id 			integer,
	tracking_no 		varchar(50),
	tracking_status 	varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	note 			text,
	terms_conditions text,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_factory_invoice_main_fk1 FOREIGN KEY(factory_id) REFERENCES tbl_factory(factory_id),
	constraint tbl_factory_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_factory_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);



create SEQUENCE tbl_factory_invoice_det_seq;
create table if not exists tbl_factory_invoice_det
(
	inv_det_id integer not null default nextval('tbl_factory_invoice_det_seq'),
	inv_id integer not null,
	jew_id integer not null,
	bin_id integer not null,
	inv_qty numeric(20,4) default 0 not null,
	labour_amount			numeric(20,4) default 0 not null,
	gold_loss_pct			numeric(20,4) default 0 not null,
	platinum_loss_pct	numeric(20,4) default 0 not null,
	silver_loss_pct	numeric(20,4) default 0 not null,
	admin_pct		numeric(20,4) default 0 not null,
	gross_wt  	numeric(20,4) default 0 not null,
	total_cogs_amount numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id),
	CONSTRAINT tbl_factory_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_factory_invoice_main(inv_id),
	CONSTRAINT tbl_factory_invoice_det_fk2 FOREIGN KEY(jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_factory_invoice_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);

create SEQUENCE tbl_factory_invoice_component_seq;
create table if not exists tbl_factory_invoice_component
(
	component_id integer not null default nextval('tbl_factory_invoice_component_seq'),
	inv_det_id integer not null,
	inv_id integer not null,
	jew_id integer not null,
	lot_id integer not null,
	bin_id integer not null,
	uom1    varchar(30) not null,
	uom2    varchar(30),
	consumed_qty1 numeric(20,4) default 0 not null,
	consumed_qty2 numeric(20,4) default 0 not null,
	broken_qty1 numeric(20,4) default 0 not null,
	broken_qty2 numeric(20,4) default 0 not null,
	loss_qty1 numeric(20,4) default 0 not null,
	loss_qty2 numeric(20,4) default 0 not null,
	original_broken_qty1 numeric(20,4) default 0 not null,
	original_broken_qty2 numeric(20,4) default 0 not null,
	original_loss_qty1 numeric(20,4) default 0 not null,
	original_loss_qty2 numeric(20,4) default 0 not null,
	return_qty1 numeric(20,4) default 0 not null,
	return_qty2 numeric(20,4) default 0 not null,

	total_qty1	numeric(20,4) default 0 not null,
	total_qty2	numeric(20,4) default 0 not null,
	cogs_amount 	numeric(20,4) default 0 not null,
	is_center_stone integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(component_id),
	CONSTRAINT tbl_factory_invoice_det_fk1 FOREIGN KEY(inv_det_id) REFERENCES tbl_factory_invoice_det(inv_det_id),
	CONSTRAINT tbl_factory_invoice_det_fk2 FOREIGN KEY(inv_id) REFERENCES tbl_factory_invoice_main(inv_id),
	CONSTRAINT tbl_factory_invoice_det_fk3 FOREIGN KEY(jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_factory_invoice_det_fk4 FOREIGN KEY(lot_id) REFERENCES tbl_product(product_id),
	CONSTRAINT tbl_factory_invoice_det_fk5 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);

create sequence tbl_customer_chart_seq;
create table if not exists tbl_customer_chart
(
	customer_chart_id	integer not null default nextval('tbl_customer_chart_seq'),
	customer_id integer not null,
	currency varchar(30),
	exchange_rate   numeric(20,2),
	company_id      integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(customer_chart_id),
	constraint tbl_customer_chart_fk1 FOREIGN key(customer_id) references tbl_customer(customer_id)
);



create sequence tbl_customer_chart_det_seq;
create table if not exists tbl_customer_chart_det
(
	customer_chart_det_id integer not null default nextval('tbl_customer_chart_det_seq'),
	customer_chart_id 	 integer not null,
	commodity_group_id	 integer not null,
	markup_pct_type 	 varchar(30) default 'PCT' not null,
	markup_pct_value 	 numeric(20,4) default 0 not null,
	roundoff 		numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(customer_chart_det_id),
	constraint tbl_customer_chart_det_fk1 FOREIGN key(customer_chart_id) references tbl_customer_chart(customer_chart_id)
);

--Stock Trans table
create SEQUENCE tbl_jewellery_stock_trans_seq;
create table if not exists tbl_jewellery_stock_trans
(
	trans_id 		integer not null default nextval('tbl_jewellery_stock_trans_seq'),
	company_id 		integer,
	jew_id 		integer,
	bin_id 			integer,
	inv_dt 			date,
	in_out_flag 	integer,
	qty 			numeric(20,4),
 	adj_qty 		numeric(20,4),
	party_type      varchar(50),
	party_id     	integer,
	currency_code	varchar(50),
	inv_rate		numeric(20,4),
	cost_price		numeric(20,4),
	inv_type  		varchar(50),
	inv_det_id  	integer,
	inv_id 			integer,
	remarks			text,
	system_remarks	text,

	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(trans_id)
);
-- Stock table
create SEQUENCE tbl_jewellery_stock_seq;
create table if not exists tbl_jewellery_stock
(
	stock_id integer not null default nextval('tbl_jewellery_stock_seq'),
	company_id integer,
	jew_id integer,
	bin_id integer,
	in_qty numeric(20,4),
	out_qty numeric(20,4),
	adj_in_qty numeric(20,4),
	adj_out_qty numeric(20,4),
	balance_qty numeric(20,4),
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(stock_id)
);


-- Goods inward module goes here
create SEQUENCE tbl_goods_inward_main_seq;
create table if not exists tbl_goods_inward_main
(
	inv_id 		integer not null default nextval('tbl_goods_inward_main_seq'),
	inv_type 	varchar(50) not null,
	inv_no 		varchar(50) not null,
	REFERENCE_no 	varchar(50) ,
	inv_dt 			date not null,
	inv_due_dt		date not null,
	inv_due_months 	numeric(20,4) not null,
	inv_due_days 	numeric(20,4) not null,
	currency 		varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
	party_type		varchar(50),
	party_id 		integer not null,
	head_employee_id 	integer,
	employee_id 		integer,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	shipment_company_name varchar(50),
	carrier_id 			integer,	
	tracking_no 		varchar(50),
	tracking_status 	varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	note 			text,
	terms_conditions text,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	constraint tbl_goods_inward_main_fk1 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_goods_inward_main_fk2 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_goods_inward_det_seq;
create table if not exists tbl_goods_inward_det
(
	inv_det_id 	integer not null default nextval('tbl_goods_inward_det_seq'),
	inv_id 		integer not null,
	jew_id		integer not null,
	prod_description text,
	bin_id 		integer not null,
	inv_qty		numeric(20,4) default 0 not null,
	uom			varchar(50) not null,
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4),
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_goods_inward_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_goods_inward_main(inv_id),
	CONSTRAINT tbl_goods_inward_det_fk2 FOREIGN KEY(jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_goods_inward_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);

create SEQUENCE tbl_goods_inward_chgs_seq;
create table if not exists tbl_goods_inward_chgs
(
	charge_id  		integer not null default nextval('tbl_goods_inward_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_party_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_goods_inward_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_goods_inward_main(inv_id)
);

-- Goods outward module goes here
create SEQUENCE tbl_goods_outward_main_seq;
create table if not exists tbl_goods_outward_main
(
	inv_id 		integer not null default nextval('tbl_goods_outward_main_seq'),
	inv_type 	varchar(50) not null,
	inv_no 		varchar(50) not null,
	REFERENCE_no 	varchar(50) ,
	inv_dt 			date not null,
	inv_due_dt		date not null,
	inv_due_months 	numeric(20,4) not null,
	inv_due_days 	numeric(20,4) not null,
	currency 		varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
	party_type		varchar(50),
	party_id 		integer not null,
	head_employee_id 	integer,
	employee_id 		integer,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	shipment_company_name varchar(50),
	carrier_id 			integer,	
	tracking_no 		varchar(50),
	tracking_status 	varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	note 			text,
	terms_conditions text,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	constraint tbl_goods_outward_main_fk1 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_goods_outward_main_fk2 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);
create SEQUENCE tbl_goods_outward_det_seq;
create table if not exists tbl_goods_outward_det
(
	inv_det_id 	integer not null default nextval('tbl_goods_outward_det_seq'),
	inv_id 		integer not null,
	jew_id		integer not null,
	prod_description text,
	bin_id 		integer not null,
	inv_qty		numeric(20,4) default 0 not null,
	uom			varchar(50) not null,
	input_rate	numeric(20,4) default 0 not null,
	input_amt	numeric(20,4) default 0 not null,
	discount_type   varchar(50),
	discount_value    numeric(20,4),
	cost_price numeric(20,4) default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_det_id)	,
	CONSTRAINT tbl_goods_outward_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_goods_outward_main(inv_id),
	CONSTRAINT tbl_goods_outward_det_fk2 FOREIGN KEY(jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_goods_outward_det_fk3 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);

create SEQUENCE tbl_goods_outward_chgs_seq;
create table if not exists tbl_goods_outward_chgs
(
	charge_id  		integer not null default nextval('tbl_goods_outward_chgs_seq'),
	inv_id     			integer not null,
	charge_name      	varchar(100) not null,
	plus_minus_flag  	integer not null,
	input_pct_amt_type 	varchar(50) not null,
	input_pct_amt_value numeric(20,4) default 0 not null,
	input_amt 			numeric(20,4) default 0 not null,
	is_party_payable integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(charge_id),
	CONSTRAINT tbl_goods_outward_chgs_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_goods_outward_main(inv_id)
);


create SEQUENCE tbl_stud_invoice_main_seq;
create table if not exists tbl_stud_invoice_main
(
	inv_id 		integer not null default nextval('tbl_stud_invoice_main_seq'),
	inv_type 	varchar(50) not null,
	inv_no 		varchar(50) not null,
	reference_no 	varchar(50) ,
	inv_dt 			date not null,
	inv_due_dt		date not null,
	inv_due_months 	numeric(20,4) not null,
	inv_due_days 	numeric(20,4) not null,
	currency 		varchar(50) not null,
	exchange_rate 	numeric(20,4) not null,
	factory_id 	integer not null,
	payment_type_id 	integer not null,
	shipment_type_id 	integer,
	shipment_company_name varchar(50),
	carrier_id 			integer,
	tracking_no 		varchar(50),
	tracking_status 	varchar(50),
	inv_status			varchar(50) not null,
	payment_status		varchar(50) not null,
	cancel_hold_status	varchar(50),
	accounting_status	varchar(50) not null,
	document_url		varchar(200),
	total_invoice_amount	numeric(20,4) default 0 not null,
	total_paid_amount		numeric(20,4) default 0 not null,
	billing_id 		integer,
	bill_address1	varchar(200),
	bill_address2	varchar(200),
	bill_country	varchar(100),
	bill_state		varchar(100),
	bill_city		varchar(100),
	bill_street		varchar(100),
	bill_pincode	varchar(50),
	bill_website	varchar(50),
	bill_phone_no	varchar(50),
	bill_fax_no		varchar(50),
	bill_mobile_no	varchar(50),
	shipping_id 	integer,
	ship_address1	varchar(200),
	ship_address2	varchar(200),
	ship_country	varchar(100),
	ship_state		varchar(100),
	ship_city		varchar(100),
	ship_street		varchar(100),
	ship_pincode	varchar(50),
	ship_website	varchar(50),
	ship_phone_no	varchar(50),
	ship_fax_no		varchar(50),
	ship_mobile_no	varchar(50),
	note 			text,
	terms_conditions text,
	company_id 		integer not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(inv_id),
	CONSTRAINT tbl_stud_invoice_main_fk1 FOREIGN KEY(factory_id) REFERENCES tbl_factory(factory_id),
	constraint tbl_stud_invoice_main_fk2 FOREIGN key(company_id) references public.tbl_company(company_id),
	constraint tbl_stud_invoice_main_fk3 FOREIGN key(payment_type_id) references tbl_payment_type(payment_type_id)
);



create SEQUENCE tbl_stud_invoice_det_seq;
create table if not exists tbl_stud_invoice_det
(
	inv_det_id 		integer not null default nextval('tbl_stud_invoice_det_seq'),
	inv_id 			integer not null,
	source_jew_id 	integer not null,
	dest_jew_id 	integer not null,
	source_bin_id 			integer not null,
	dest_bin_id 			integer not null,
	inv_qty 			numeric(20,4) default 0 not null,
	labour_amount		numeric(20,4) default 0 not null,
	gold_loss_pct		numeric(20,4) default 0 not null,
	platinum_loss_pct	numeric(20,4) default 0 not null,
	silver_loss_pct		numeric(20,4) default 0 not null,
	admin_pct			numeric(20,4) default 0 not null,
	gross_wt  			numeric(20,4) default 0 not null,
	total_cogs_amount 	numeric(20,4) default 0 not null,
	remarks				text,
	system_remarks		text,
	sort_seq			integer default 0 not null,
	is_locked			integer default 0 not null,
	created_by 			integer NOT NULL,
	created_dt			TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 		integer,
	modified_dt			TIMESTAMP,
	is_deleted			integer default 0 not null,
	PRIMARY KEY(inv_det_id),
	CONSTRAINT tbl_stud_invoice_det_fk1 FOREIGN KEY(inv_id) REFERENCES tbl_stud_invoice_main(inv_id),
	CONSTRAINT tbl_stud_invoice_det_fk2 FOREIGN KEY(source_jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_stud_invoice_det_fk3 FOREIGN KEY(dest_jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_stud_invoice_det_fk4 FOREIGN KEY(source_bin_id) REFERENCES tbl_bin(bin_id),
	CONSTRAINT tbl_stud_invoice_det_fk5 FOREIGN KEY(dest_bin_id) REFERENCES tbl_bin(bin_id)
);

create SEQUENCE tbl_stud_invoice_component_seq;
create table if not exists tbl_stud_invoice_component
(
	component_id 	integer not null default nextval('tbl_stud_invoice_component_seq'),
	inv_det_id 		integer not null,
	inv_id 			integer not null,
	dest_jew_id 			integer not null,
	lot_id 			integer not null,
	bin_id 			integer not null,
	uom1    		varchar(30) not null,
	uom2    		varchar(30),
	consumed_qty1 numeric(20,4) default 0 not null,
	consumed_qty2 numeric(20,4) default 0 not null,
	broken_qty1 numeric(20,4) default 0 not null,
	broken_qty2 numeric(20,4) default 0 not null,
	loss_qty1 numeric(20,4) default 0 not null,
	loss_qty2 numeric(20,4) default 0 not null,
	original_broken_qty1 numeric(20,4) default 0 not null,
	original_broken_qty2 numeric(20,4) default 0 not null,
	original_loss_qty1 numeric(20,4) default 0 not null,
	original_loss_qty2 numeric(20,4) default 0 not null,
	return_qty1 numeric(20,4) default 0 not null,
	return_qty2 numeric(20,4) default 0 not null,
	total_qty1	numeric(20,4) default 0 not null,
	total_qty2	numeric(20,4) default 0 not null,
	cogs_amount 	numeric(20,4) default 0 not null,
	is_center_stone integer default 0 not null,
	remarks			text,
	system_remarks	text,
	sort_seq		integer default 0 not null,
	is_locked		integer default 0 not null,
	created_by 		integer NOT NULL,
	created_dt		TIMESTAMP DEFAULT current_timestamp  NOT NULL,
	modified_by 	integer,
	modified_dt		TIMESTAMP,
	is_deleted		integer default 0 not null,
	PRIMARY KEY(component_id),
	CONSTRAINT tbl_stud_invoice_component_fk1 FOREIGN KEY(inv_det_id) REFERENCES tbl_stud_invoice_det(inv_det_id),
	CONSTRAINT tbl_stud_invoice_component_fk2 FOREIGN KEY(inv_id) REFERENCES tbl_stud_invoice_main(inv_id),
	CONSTRAINT tbl_stud_invoice_component_fk3 FOREIGN KEY(dest_jew_id) REFERENCES tbl_jewellery(jew_id),
	CONSTRAINT tbl_stud_invoice_component_fk4 FOREIGN KEY(lot_id) REFERENCES tbl_product(product_id),
	CONSTRAINT tbl_stud_invoice_component_fk5 FOREIGN KEY(bin_id) REFERENCES tbl_bin(bin_id)
);
